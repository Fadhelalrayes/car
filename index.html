<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>تذكرتك | قارن أسعار التذاكر</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f9fafb;--card:#fff;--ink:#0f172a;--muted:#6b7280;--line:#e5e7eb;--brand:#0ea5e9;--brand2:#0284c7;--shadow:0 12px 30px rgba(2,132,199,.12);--radius:18px;--ring:0 0 0 3px rgba(14,165,233,.25)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Cairo',sans-serif}
    header{background:#fff;border-bottom:1px solid var(--line)}
    .container{max-width:980px;margin:auto;padding:20px 16px}
    .brand{text-align:center}
    .brand .title{font-weight:900;font-size:32px;color:var(--brand)}
    .brand .tag{margin-top:6px;color:#374151;font-weight:700}
    form.search{display:grid;gap:12px;margin-top:18px}
    .fld{background:var(--card);border:2px solid var(--line);border-radius:18px;padding:14px 16px;box-shadow:var(--shadow)}
    .fld:focus-within{border-color:var(--brand);box-shadow:var(--shadow),var(--ring)}
    .lbl{font-size:13px;color:var(--muted);margin-bottom:6px}
    select,input{width:100%;border:0;outline:none;background:transparent;font-size:18px;padding:8px 0;color:var(--ink)}
    input[type=date]{font-size:16px;padding:6px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .cta{width:100%;background:linear-gradient(180deg,var(--brand),var(--brand2));color:#fff;border:0;border-radius:18px;padding:16px;font-weight:900;cursor:pointer;font-size:18px;box-shadow:var(--shadow)}
    .cta:hover{filter:brightness(.98)}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="title">تذكرتك</div>
        <div class="tag">استكشف أرخص أسعار تذاكر الطيران</div>
      </div>

      <form class="search" onsubmit="event.preventDefault(); openSelected();">
        <!-- من -->
        <div class="fld">
          <div class="lbl">من</div>
          <select id="origin">
            <optgroup label="الدول العربية">
              <option value="BAH" selected>البحرين - المنامة (BAH)</option>
              <option value="RUH">السعودية - الرياض (RUH)</option>
              <option value="JED">السعودية - جدة (JED)</option>
              <option value="DMM">السعودية - الدمام (DMM)</option>
              <option value="MED">السعودية - المدينة (MED)</option>
              <option value="DXB">الإمارات - دبي (DXB)</option>
              <option value="AUH">الإمارات - أبوظبي (AUH)</option>
              <option value="SHJ">الإمارات - الشارقة (SHJ)</option>
              <option value="DOH">قطر - الدوحة (DOH)</option>
              <option value="KWI">الكويت - الكويت (KWI)</option>
              <option value="MCT">عُمان - مسقط (MCT)</option>
              <option value="CAI">مصر - القاهرة (CAI)</option>
              <option value="HBE">مصر - الإسكندرية (HBE)</option>
              <option value="AMM">الأردن - عمّان (AMM)</option>
              <option value="BEY">لبنان - بيروت (BEY)</option>
              <option value="CMN">المغرب - الدار البيضاء (CMN)</option>
              <option value="RBA">المغرب - الرباط (RBA)</option>
              <option value="ALG">الجزائر - الجزائر (ALG)</option>
              <option value="ORN">الجزائر - وهران (ORN)</option>
              <option value="TUN">تونس - تونس (TUN)</option>
              <option value="KRT">السودان - الخرطوم (KRT)</option>
              <option value="MJI">ليبيا - طرابلس (MJI)</option>
              <option value="BGW">العراق - بغداد (BGW)</option>
              <option value="EBL">العراق - أربيل (EBL)</option>
              <option value="SAH">اليمن - صنعاء (SAH)</option>
              <option value="ADE">اليمن - عدن (ADE)</option>
              <option value="DAM">سوريا - دمشق (DAM)</option>
              <option value="NKC">موريتانيا - نواكشوط (NKC)</option>
              <option value="JIB">جيبوتي - جيبوتي (JIB)</option>
              <option value="MGQ">الصومال - مقديشو (MGQ)</option>
              <option value="HAH">جزر القمر - موروني (HAH)</option>
            </optgroup>
            <optgroup label="وجهات أجنبية شائعة">
              <option value="IST">إسطنبول (IST)</option><option value="SAW">صبيحة (SAW)</option>
              <option value="AYT">أنطاليا (AYT)</option><option value="TZX">طرابزون (TZX)</option>
              <option value="CDG">باريس (CDG)</option><option value="LHR">لندن (LHR)</option>
              <option value="AMS">أمستردام (AMS)</option><option value="FRA">فرانكفورت (FRA)</option>
              <option value="MUC">ميونخ (MUC)</option><option value="ZRH">زيورخ (ZRH)</option>
              <option value="BCN">برشلونة (BCN)</option><option value="MAD">مدريد (MAD)</option>
              <option value="FCO">روما (FCO)</option><option value="MXP">ميلانو (MXP)</option>
              <option value="VIE">فيينا (VIE)</option><option value="PRG">براغ (PRG)</option>
              <option value="BUD">بودابست (BUD)</option><option value="WAW">وارسو (WAW)</option>
              <option value="LIS">لشبونة (LIS)</option><option value="OPO">بورتو (OPO)</option>
              <option value="MLE">ماليه (MLE)</option><option value="KUL">كوالالمبور (KUL)</option>
              <option value="BKK">بانكوك (BKK)</option><option value="HKT">بوكيت (HKT)</option>
              <option value="DPS">بالي (DPS)</option><option value="NBO">نيروبي (NBO)</option>
              <option value="ZNZ">زنجبار (ZNZ)</option><option value="JFK">نيويورك (JFK)</option>
            </optgroup>
          </select>
        </div>

        <!-- إلى -->
        <div class="fld">
          <div class="lbl">إلى</div>
          <select id="destination">
            <!-- يمكنك تكرار القائمة كاملة؛ اختصرتها هنا -->
            <option value="CAI" selected>مصر - القاهرة (CAI)</option>
            <option value="DXB">الإمارات - دبي (DXB)</option>
            <option value="IST">إسطنبول (IST)</option>
            <option value="LHR">لندن (LHR)</option>
            <option value="CDG">باريس (CDG)</option>
            <option value="JED">السعودية - جدة (JED)</option>
          </select>
        </div>

        <!-- التواريخ -->
        <div class="row2">
          <div class="fld">
            <div class="lbl">تاريخ الذهاب</div>
            <input id="dep" type="date">
          </div>
          <div class="fld">
            <div class="lbl">تاريخ العودة (اختياري)</div>
            <input id="ret" type="date">
          </div>
        </div>

        <!-- الركاب والدرجة -->
        <div class="fld">
          <div class="lbl">عدد المسافرين</div>
          <input id="pax" type="number" min="1" value="1">
        </div>
        <div class="fld">
          <div class="lbl">الدرجة</div>
          <select id="cabin">
            <option value="economy" selected>اقتصادية</option>
            <option value="business">أعمال</option>
            <option value="first">أولى</option>
          </select>
        </div>

        <!-- الموقع (المواقع التي تعمل) -->
        <div class="fld">
          <div class="lbl">الموقع</div>
          <select id="provider">
            <option value="skyscanner" selected>Skyscanner</option>
            <option value="kayak">KAYAK</option>
          </select>
        </div>

        <button class="cta" type="submit">ابحث 🔎</button>
      </form>
    </div>
  </header>

  <script>
    // تحويلات خاصة
    const kayakCabin = c => ({economy:'e',business:'b',first:'f'}[c]||'e');
    const ymd = d => d || "";                 // YYYY-MM-DD
    const ymdCompact = d => d? d.replace(/-/g,"") : ""; // YYYYMMDD

    function buildURL(provider, o, d, dep, ret, pax, cabin){
      const depYMD = ymd(dep), retYMD = ymd(ret);
      const depSC  = ymdCompact(dep), retSC = ymdCompact(ret);

      switch(provider){
        case 'skyscanner': {
          // مثال: https://www.skyscanner.net/transport/flights/BAH/CAI/20250912/20250919/?adults=1&cabinclass=economy&locale=ar-SA
          let base = `https://www.skyscanner.net/transport/flights/${o}/${d}`;
          if(depSC) base += `/${depSC}`;
          if(retSC) base += `/${retSC}`;
          return `${base}/?adults=${encodeURIComponent(pax)}&cabinclass=${encodeURIComponent(cabin)}&locale=ar-SA`;
        }
        case 'kayak': {
          // مثال: https://www.kayak.ae/flights/BAH-CAI/2025-09-12/2025-09-19?adults=1&cabin=e&lang=ar
          let base = `https://www.kayak.ae/flights/${o}-${d}`;
          if(depYMD) base += `/${depYMD}`;
          if(retYMD) base += `/${retYMD}`;
          return `${base}?adults=${encodeURIComponent(pax)}&cabin=${encodeURIComponent(kayakCabin(cabin))}&lang=ar&sort=price_a`;
        }
        default: return '#';
      }
    }

    function openSelected(){
      const o = document.getElementById('origin').value;
      const d = document.getElementById('destination').value;
      const p = document.getElementById('provider').value;
      const dep = document.getElementById('dep').value;
      const ret = document.getElementById('ret').value;
      const pax = document.getElementById('pax').value || 1;
      const cabin = document.getElementById('cabin').value;
      if(!o || !d){ alert('اختر: من / إلى'); return; }

      // في كاياك، يفضَّل وجود تاريخ على الأقل ليقبل الرابط دائماً
      if(p==='kayak' && !dep){
        alert('كيّاك يعمل أفضل عند تحديد تاريخ الذهاب.');
        return;
      }

      const url = buildURL(p,o,d,dep,ret,pax,cabin);
      window.open(url,'_blank','noopener');
    }

    // تعبئة تلقائية افتراضية
    (function autofill(){
      const now = new Date();
      const d1 = new Date(now); d1.setDate(d1.getDate()+7);
      const d2 = new Date(now); d2.setDate(d2.getDate()+14);
      const iso = d => d.toISOString().slice(0,10);
      document.getElementById('origin').value='BAH';
      document.getElementById('destination').value='CAI';
      document.getElementById('dep').value=iso(d1);
      document.getElementById('ret').value=iso(d2);
      document.getElementById('pax').value=1;
      document.getElementById('cabin').value='economy';
      document.getElementById('provider').value='skyscanner'; // افتراضيًا على سكاي سكانر
    })();
  </script>
</body>
</html>
