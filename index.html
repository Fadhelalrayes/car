<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ù…Ù†Ø´Ø¦ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
<style>
  :root{
    --bg:#f7f7fb;--text:#222;--muted:#6b7280;--pri:#1f6feb;--card:#fff;--line:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:var(--pri)}
  /* Top bar */
  header.app{
    position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);
    padding:10px 16px;display:flex;gap:10px;align-items:center;z-index:5
  }
  header.app h1{font-size:18px;margin:0}
  .container{display:grid;grid-template-columns:380px 1fr;gap:18px;max-width:1200px;margin:18px auto;padding:0 16px}
  /* Form card */
  .card{background:var(--card);border:1px solid var(--line);border-radius:10px;padding:16px}
  .card h2{font-size:16px;margin:0 0 8px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  label{font-size:13px;color:var(--muted)}
  input,textarea,select{
    width:100%;padding:10px;border:1px solid var(--line);border-radius:8px;background:#fff;font-size:14px
  }
  textarea{min-height:90px;resize:vertical}
  .btn{border:0;border-radius:8px;padding:10px 14px;background:var(--pri);color:#fff;cursor:pointer;font-weight:600}
  .btn.secondary{background:#1118270d;color:#111}
  .btn.ghost{background:transparent;border:1px dashed var(--line);color:#111}
  .stack{display:flex;gap:8px;flex-wrap:wrap}
  .small{font-size:12px;color:var(--muted)}
  .section{margin-top:14px;border-top:1px dashed var(--line);padding-top:14px}
  .item{border:1px dashed var(--line);border-radius:8px;padding:10px;margin-top:10px;background:#fafafa;position:relative}
  .item .remove{position:absolute;inset-inline-start:8px;top:8px;background:#fff;border:1px solid #ef4444;color:#ef4444}
  /* CV preview */
  .cv-wrap{padding:0}
  .sheet{
    width:210mm;min-height:297mm;margin:0 auto;background:#fff;color:#111;box-shadow:0 10px 30px rgba(0,0,0,.06);
    display:grid;grid-template-columns:7cm 1fr
  }
  .side{
    background:#0f172a;color:#f8fafc;padding:18mm 14mm;border-inline-end:1px solid #0b1225
  }
  .main{padding:18mm 18mm}
  .avatar{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid #1f2937;background:#1f2937}
  .name{font-size:26px;font-weight:800;margin:10px 0 2px}
  .title{color:#cbd5e1;font-size:13px;margin:0 0 14px}
  .side h3,.main h3{font-size:13px;letter-spacing:.5px;margin:14px 0 8px;text-transform:uppercase}
  .side .info p,.side .skills span,.side .langs span{font-size:12px;color:#e2e8f0}
  .skills .tag,.langs .tag{display:inline-block;border:1px solid rgba(255,255,255,.25);border-radius:999px;padding:3px 8px;margin:4px 4px 0 0}
  .section-title{font-size:14px;font-weight:800;margin:16px 0 8px;position:relative}
  .main .job{margin-bottom:12px}
  .job .top{display:flex;justify-content:space-between;gap:8px;font-weight:700}
  .job .meta{color:#6b7280;font-size:12px;margin:2px 0 6px}
  .bullets{margin:0 0 12px 0;padding:0 18px}
  .bullets li{margin:4px 0}
  .proj .link{font-size:12px}
  .hero-summary{border:1px solid var(--line);border-radius:8px;padding:10px;background:#fafafa;margin-bottom:14px}
  .muted{color:#6b7280}
  /* Print */
  @media print{
    header.app,.card{display:none!important}
    body{background:#fff}
    .sheet{box-shadow:none;margin:0}
    @page{size:A4;margin:12mm}
  }
</style>
</head>
<body>

<header class="app">
  <h1>Ù…Ù†Ø´Ø¦ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h1>
  <div class="stack">
    <button class="btn" onclick="generate()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
    <button class="btn secondary" onclick="window.print()">ØªØ­Ù…ÙŠÙ„ PDF</button>
    <button class="btn ghost" onclick="clearAll()">ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
  </div>
</header>

<div class="container">
  <!-- ===== Form ===== -->
  <div class="card">
    <h2>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h2>
    <div class="row">
      <div>
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input id="name" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ" required>
      </div>
      <div>
        <label>Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
        <input id="role" placeholder="Ù…Ø·ÙˆÙ‘Ø± ÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ù…Ø§Ù…ÙŠØ©">
      </div>
    </div>
    <div class="row section">
      <div>
        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯</label>
        <input id="email" type="email" placeholder="you@example.com">
      </div>
      <div>
        <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input id="phone" placeholder="+966â€¦">
      </div>
    </div>
    <div class="row">
      <div>
        <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
        <input id="location" placeholder="Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">
      </div>
      <div>
        <label>Ø±Ø§Ø¨Ø· Ø´Ø®ØµÙŠ (LinkedIn / Ù…ÙˆÙ‚Ø¹)</label>
        <input id="website" placeholder="https://linkedin.com/in/username">
      </div>
    </div>
    <div class="section">
      <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="photo" placeholder="https://â€¦/avatar.jpg">
    </div>
    <div class="section">
      <label>Ù…Ù„Ø®Øµ Ø§Ø­ØªØ±Ø§ÙÙŠ (3â€“4 Ø£Ø³Ø·Ø± Ù…Ø±ÙƒÙ‘Ø²Ø©)</label>
      <textarea id="summary" placeholder="Ù…Ù„Ø®Ù‘Øµ Ù‚ØµÙŠØ± ÙŠÙˆØ¶Ø­ Ø®Ø¨Ø±ØªÙƒØŒ Ø£Ù‡Ù… Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒØŒ ÙˆÙ‚ÙŠÙ…ØªÙƒ Ø§Ù„Ù…Ø¶Ø§ÙØ©."></textarea>
      <div class="small">Ù†ØµÙŠØ­Ø©: Ø§Ø°ÙƒØ± Ø£Ø±Ù‚Ø§Ù…/Ù†ØªØ§Ø¦Ø¬ Ù…Ù„Ù…ÙˆØ³Ø© + Ø£Ø¯ÙˆØ§ØªÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.</div>
    </div>

    <div class="section">
      <h2>Ø§Ù„Ø®Ø¨Ø±Ø§Øª</h2>
      <div id="expList"></div>
      <button class="btn ghost" onclick="addExp()">+ Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø©</button>
    </div>

    <div class="section">
      <h2>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h2>
      <div id="eduList"></div>
      <button class="btn ghost" onclick="addEdu()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ù‡Ù„</button>
    </div>

    <div class="section">
      <h2>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h2>
      <div class="row">
        <div><label>Ø§ÙƒØªØ¨ Ù…Ù‡Ø§Ø±Ø© ÙˆØ§Ø¶ØºØ· Ø¥Ø¶Ø§ÙØ©</label><input id="skillInput" placeholder="JavaScript"></div>
        <div style="display:flex;align-items:end"><button class="btn secondary" onclick="addSkill()" type="button">Ø¥Ø¶Ø§ÙØ©</button></div>
      </div>
      <div id="skillsBox" class="stack" style="margin-top:8px"></div>
    </div>

    <div class="section">
      <h2>Ø§Ù„Ù„ØºØ§Øª</h2>
      <div class="row">
        <div><label>Ø§Ù„Ù„ØºØ©</label><input id="langName" placeholder="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"></div>
        <div>
          <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</label>
          <select id="langLevel">
            <option>Ø£Ø³Ø§Ø³ÙŠ</option><option>Ù…ØªÙˆØ³Ø·</option><option>Ù…ØªÙ‚Ø¯Ù…</option><option>Ø·Ù„ÙŠÙ‚</option><option>Ù„ØºØ© Ø£Ù…</option>
          </select>
        </div>
      </div>
      <div style="margin-top:8px"><button class="btn secondary" type="button" onclick="addLang()">Ø¥Ø¶Ø§ÙØ©</button></div>
      <div id="langsBox" class="stack" style="margin-top:8px"></div>
    </div>

    <div class="section">
      <h2>Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h2>
      <div id="projList"></div>
      <button class="btn ghost" onclick="addProj()">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹</button>
    </div>

    <div class="section">
      <button class="btn" onclick="generate()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
      <span class="small">ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.</span>
    </div>
  </div>

  <!-- ===== CV Preview ===== -->
  <div class="cv-wrap">
    <div class="sheet" id="sheet">
      <aside class="side">
        <img id="p_avatar" class="avatar" alt="avatar">
        <div class="name" id="p_name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</div>
        <div class="title" id="p_role">Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</div>

        <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
        <div class="info" id="p_contacts"></div>

        <h3>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
        <div class="skills" id="p_skills"></div>

        <h3>Ø§Ù„Ù„ØºØ§Øª</h3>
        <div class="langs" id="p_langs"></div>
      </aside>

      <main class="main">
        <div class="hero-summary" id="p_summary">Ø§ÙƒØªØ¨ Ù…Ù„Ø®Ù‘ØµÙ‹Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠÙ‹Ø§ Ù…ÙˆØ¬Ø²Ù‹Ø§ ÙŠØ¨Ø±Ø² Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ.</div>

        <div class="section-title">Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</div>
        <div id="p_exps"></div>

        <div class="section-title">Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
        <div id="p_edus"></div>

        <div class="section-title" id="projTitle" style="display:none">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
        <div id="p_projs"></div>
      </main>
    </div>
  </div>
</div>

<script>
/* ---------- Helpers & State ---------- */
const state = {
  skills:[], langs:[], exps:[], edus:[], projs:[]
};
const $ = sel => document.querySelector(sel);
const el = (tag, props={}, ...children)=>{
  const e=document.createElement(tag);
  Object.assign(e, props);
  children.forEach(c=>e.append(c));
  return e;
};
function save(){ localStorage.setItem('cvpro', JSON.stringify(collect())); }
function load(){
  const raw=localStorage.getItem('cvpro'); if(!raw) {seed(); return}
  try{fill(JSON.parse(raw));}catch{seed()}
}
/* ---------- Seed with example ---------- */
function seed(){
  $('#name').value='Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ';
  $('#role').value='Ù…Ø·ÙˆÙ‘Ø± ÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ù…Ø§Ù…ÙŠØ©';
  $('#email').value='ahmad@example.com';
  $('#phone').value='+966501234567';
  $('#location').value='Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©';
  $('#website').value='https://linkedin.com/in/ahmad';
  $('#summary').value='Ù…Ø·ÙˆÙ‘Ø± ÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ù…Ø§Ù…ÙŠØ© Ø¨Ø®Ø¨Ø±Ø© 4+ Ø³Ù†ÙˆØ§Øª ÙÙŠ React ÙˆTypeScript... Ø­Ø³Ù‘Ù†Øª Ø³Ø±Ø¹Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ 38% ÙˆØ³Ø§Ù‡Ù…Øª Ø¨Ø±ÙØ¹ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ 12%.';
  addExp({company:'Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ© XYZ',title:'Front-end Engineer',start:'2022',end:'Ø§Ù„Ø­Ø§Ù„ÙŠ',city:'Ø§Ù„Ø±ÙŠØ§Ø¶',
          bullets:'Ù‚ÙŠØ§Ø¯Ø© ØªØ·ÙˆÙŠØ± Ù…ÙƒÙˆÙ†Ø§Øª ØªØµÙ…ÙŠÙ….\nØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Core Web Vitals.\nØ¨Ù†Ø§Ø¡ CI/CD Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©.'});
  addExp({company:'ÙˆÙƒØ§Ù„Ø© Ø§Ù„ÙˆÙŠØ¨ ABC',title:'Front-end Developer',start:'2020',end:'2022',city:'Ø¬Ø¯Ø©',
          bullets:'ØªØ·ÙˆÙŠØ± Ù„ÙˆØ­Ø§Øª ØªØ­ÙƒÙ….\nØªÙƒØ§Ù…Ù„ APIs.\nØªØ­Ø³ÙŠÙ† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„.'});
  addEdu({school:'Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„Ùƒ Ø³Ø¹ÙˆØ¯',degree:'Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨',start:'2016',end:'2020',city:'Ø§Ù„Ø±ÙŠØ§Ø¶',notes:'Ù…Ø±ØªØ¨Ø© Ø§Ù„Ø´Ø±Ù Ø§Ù„Ø£ÙˆÙ„Ù‰'});
  ['JavaScript','TypeScript','React','Next.js','CSS','Tailwind','Git','Testing'].forEach(s=>addSkill(s));
  addLang('Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©','Ù„ØºØ© Ø£Ù…'); addLang('Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©','Ù…ØªÙ‚Ø¯Ù…');
  addProj({name:'Ù„ÙˆØ­Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…ØªØ§Ø¬Ø±',desc:'Dashboard Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¢Ù†ÙŠØ© Ù…Ø¹ Charts.',
           link:'https://example.com'});
  generate(); save();
}
/* ---------- Dynamic blocks ---------- */
function addExp(pref={}){
  const c=el('div',{className:'item'});
  c.append(
    el('button',{className:'btn remove',type:'button',onclick:()=>c.remove()},'Ø­Ø°Ù'),
    lab('Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ', 'title', pref.title||''),
    lab('Ø§Ù„Ø´Ø±ÙƒØ©', 'company', pref.company||''),
    lab('Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', 'city', pref.city||''),
    row(lab('Ù…Ù†', 'start', pref.start||''), lab('Ø¥Ù„Ù‰', 'end', pref.end||'')),
    lab('Ø¥Ù†Ø¬Ø§Ø²Ø§Øª (Ø³Ø·Ø± Ù„ÙƒÙ„ Ù†Ù‚Ø·Ø©)', 'bullets', pref.bullets||'', true)
  );
  $('#expList').append(c);
}
function addEdu(pref={}){
  const c=el('div',{className:'item'});
  c.append(
    el('button',{className:'btn remove',type:'button',onclick:()=>c.remove()},'Ø­Ø°Ù'),
    lab('Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©', 'school', pref.school||''),
    lab('Ø§Ù„Ù…Ø¤Ù‡Ù„', 'degree', pref.degree||''),
    lab('Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', 'city', pref.city||''),
    row(lab('Ù…Ù†', 'start', pref.start||''), lab('Ø¥Ù„Ù‰', 'end', pref.end||'')),
    lab('Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)', 'notes', pref.notes||'', true)
  );
  $('#eduList').append(c);
}
function addProj(pref={}){
  const c=el('div',{className:'item'});
  c.append(
    el('button',{className:'btn remove',type:'button',onclick:()=>c.remove()},'Ø­Ø°Ù'),
    lab('Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹', 'name', pref.name||''),
    lab('ÙˆØµÙ Ù…Ø®ØªØµØ±', 'desc', pref.desc||'', true),
    lab('Ø±Ø§Ø¨Ø·', 'link', pref.link||'')
  );
  $('#projList').append(c);
}
function lab(title, name, val, ta=false){
  const wrap=el('div');
  const id = 'f_'+name+'_'+Math.random().toString(36).slice(2,7);
  const L=el('label',{}, title);
  const field = ta ? el('textarea',{value:val}) : el('input',{value:val});
  field.dataset.name = name;
  wrap.append(L, field);
  return wrap;
}
function row(a,b){const r=el('div',{className:'row'}); r.append(a,b); return r;}
function addSkill(v){const val = typeof v==='string'? v : $('#skillInput').value.trim(); if(!val) return;
  const s=el('span',{className:'tag'}, val); s.onclick=()=>s.remove(); $('#skillsBox').append(s); $('#skillInput').value='';}
function addLang(n,l){const name = typeof n==='string'? n : $('#langName').value.trim(); const level = typeof l==='string'? l : $('#langLevel').value;
  if(!name) return; const s=el('span',{className:'tag'}, name+' â€” '+level); s.onclick=()=>s.remove(); $('#langsBox').append(s); $('#langName').value='';}

/* ---------- Collect & Fill ---------- */
function collect(){
  const exps=[...$('#expList').children].map(div=>{
    const f=div.querySelectorAll('[data-name]');
    const o={}; f.forEach(x=>o[x.dataset.name]=x.value); return o;
  });
  const edus=[...$('#eduList').children].map(div=>{
    const f=div.querySelectorAll('[data-name]');
    const o={}; f.forEach(x=>o[x.dataset.name]=x.value); return o;
  });
  const projs=[...$('#projList').children].map(div=>{
    const f=div.querySelectorAll('[data-name]');
    const o={}; f.forEach(x=>o[x.dataset.name]=x.value); return o;
  });
  const skills=[...$('#skillsBox').children].map(s=>s.textContent);
  const langs=[...$('#langsBox').children].map(s=>s.textContent);
  return {
    name:$('#name').value, role:$('#role').value, email:$('#email').value, phone:$('#phone').value,
    location:$('#location').value, website:$('#website').value, photo:$('#photo').value,
    summary:$('#summary').value, exps, edus, skills, langs, projs
  };
}
function fill(data){
  // basics
  ['name','role','email','phone','location','website','photo','summary'].forEach(k=>{
    if(data[k]) $('#'+k).value=data[k];
  });
  // lists
  $('#expList').innerHTML=''; (data.exps||[]).forEach(addExp);
  $('#eduList').innerHTML=''; (data.edus||[]).forEach(addEdu);
  $('#projList').innerHTML=''; (data.projs||[]).forEach(addProj);
  $('#skillsBox').innerHTML=''; (data.skills||[]).forEach(addSkill);
  $('#langsBox').innerHTML=''; (data.langs||[]).forEach(x=>{
    const [n,...r]=x.split('â€”'); addLang(n.trim(), r.join('â€”').trim()||'');
  });
  generate();
}
/* ---------- Generate Preview ---------- */
function generate(){
  const d=collect();
  // photo
  const avatar = $('#p_avatar');
  if(d.photo){ avatar.src = d.photo; avatar.style.display='block'; } else { avatar.removeAttribute('src'); avatar.style.display='none'; }
  // name/role
  $('#p_name').textContent = d.name || 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„';
  $('#p_role').textContent = d.role || 'Ø§Ù„Ù…Ø³Ù…Ù‘Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ';
  // contacts
  const contacts=[];
  if(d.email) contacts.push(`ğŸ“§ <a href="mailto:${d.email}">${d.email}</a>`);
  if(d.phone) contacts.push(`ğŸ“ ${d.phone}`);
  if(d.location) contacts.push(`ğŸ“ ${d.location}`);
  if(d.website) contacts.push(`ğŸ”— <a href="${d.website}" target="_blank" rel="noreferrer">${d.website}</a>`);
  $('#p_contacts').innerHTML = contacts.map(p=>`<p>${p}</p>`).join('') || '<p class="muted">Ø£Ø¶Ù Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„â€¦</p>';
  // skills
  $('#p_skills').innerHTML = (d.skills||[]).map(s=>`<span class="tag">${s}</span>`).join('') || '<span class="small">Ø£Ø¶Ù Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</span>';
  // langs
  $('#p_langs').innerHTML = (d.langs||[]).map(s=>`<span class="tag">${s}</span>`).join('') || '<span class="small">Ø£Ø¶Ù Ø§Ù„Ù„ØºØ§Øª</span>';
  // summary
  $('#p_summary').textContent = d.summary || 'Ø§ÙƒØªØ¨ Ù…Ù„Ø®Ù‘ØµÙ‹Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠÙ‹Ø§ Ù…ÙˆØ¬Ø²Ù‹Ø§ ÙŠØ¨Ø±Ø² Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ.';
  // exps
  const exps = (d.exps||[]).filter(e=>e.company||e.title);
  $('#p_exps').innerHTML = exps.map(e=>{
    const bullets = (e.bullets||'').split('\n').filter(Boolean).map(b=>`<li>${escapeHTML(b)}</li>`).join('');
    const meta = [e.city, [e.start,e.end].filter(Boolean).join(' â€“ ')].filter(Boolean).join(' â€¢ ');
    return `<div class="job">
      <div class="top"><div>${escapeHTML(e.title||'')}</div><div>${escapeHTML(e.company||'')}</div></div>
      <div class="meta">${escapeHTML(meta)}</div>
      ${bullets?`<ul class="bullets">${bullets}</ul>`:''}
    </div>`;
  }).join('') || `<div class="small muted">Ø£Ø¶Ù Ø®Ø¨Ø±Ø§ØªÙƒ Ù…Ø¹ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ù†Ù‚Ø·ÙŠØ© Ù…Ø±ÙƒÙ‘Ø²Ø©.</div>`;
  // edus
  const edus = (d.edus||[]).filter(e=>e.school||e.degree);
  $('#p_edus').innerHTML = edus.map(e=>{
    const meta = [e.city, [e.start,e.end].filter(Boolean).join(' â€“ ')].filter(Boolean).join(' â€¢ ');
    return `<div class="job">
      <div class="top"><div>${escapeHTML(e.degree||'')}</div><div>${escapeHTML(e.school||'')}</div></div>
      <div class="meta">${escapeHTML(meta)}</div>
      ${e.notes?`<div class="muted" style="margin-top:4px">${escapeHTML(e.notes)}</div>`:''}
    </div>`;
  }).join('') || `<div class="small muted">Ø£Ø¶Ù Ù…Ø¤Ù‡Ù„Ø§ØªÙƒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©.</div>`;
  // projects
  const projs = (d.projs||[]).filter(p=>p.name||p.desc||p.link);
  $('#projTitle').style.display = projs.length? 'block':'none';
  $('#p_projs').innerHTML = projs.map(p=>{
    const link = p.link? `<span class="link">â€” <a href="${p.link}" target="_blank" rel="noreferrer">${p.link}</a></span>`:'';
    return `<div class="proj job">
      <div class="top"><div>${escapeHTML(p.name||'')}</div><div></div></div>
      <div class="muted">${escapeHTML(p.desc||'')}</div>
      ${link}
    </div>`;
  }).join('');
  save();
}
function escapeHTML(str){return (str||'').replace(/[&<>'"]/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;' }[m]));}

/* ---------- Utilities ---------- */
function clearAll(){
  if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙØ±ÙŠØº Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ØŸ')) return;
  localStorage.removeItem('cvpro'); location.reload();
}
function addSkillEnter(e){ if(e.key==='Enter'){ e.preventDefault(); addSkill(); } }
$('#skillInput').addEventListener('keydown', addSkillEnter);

/* ---------- Init ---------- */
window.addEventListener('DOMContentLoaded', load);
</script>
</body>
</html>
