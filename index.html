<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>تذكرتك | قارن أسعار التذاكر</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    body{margin:0;background:#f9fafb;color:#0f172a;font-family:'Cairo',sans-serif}
    header{background:#fff;border-bottom:1px solid #e5e7eb;position:sticky;top:0;z-index:10}
    .container{max-width:980px;margin:auto;padding:16px}
    .logo{font-weight:900;font-size:28px;color:#0ea5e9}
    form.search{display:grid;gap:12px;margin-top:16px}
    .fld{background:#fff;border:2px solid #e5e7eb;border-radius:18px;padding:14px 16px;box-shadow:0 12px 30px rgba(2,132,199,.12)}
    .fld:focus-within{border-color:#0ea5e9;box-shadow:0 12px 30px rgba(2,132,199,.12),0 0 0 3px rgba(14,165,233,.25)}
    .lbl{font-size:13px;color:#6b7280;margin-bottom:6px}
    select,input{width:100%;border:0;outline:none;background:transparent;font-size:18px;padding:8px 0;color:#0f172a}
    input[type=date]{font-size:16px;padding:6px}
    .cta{width:100%;background:linear-gradient(180deg,#0ea5e9,#0284c7);color:#fff;border:0;border-radius:18px;padding:16px;font-weight:900;cursor:pointer;font-size:18px;box-shadow:0 12px 30px rgba(2,132,199,.12)}
    .cta:hover{filter:brightness(.98)}
    .card{margin:14px 0;background:#fff;border:1px solid #e5e7eb;border-radius:18px;padding:14px}
    .meta{color:#6b7280;font-size:13px}
    .link{display:inline-block;margin-top:8px;background:#10b981;color:#062a24;padding:10px 12px;border-radius:12px;font-weight:900;text-decoration:none}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">✈️ تذكرتك</div>

      <form class="search" onsubmit="event.preventDefault(); openSelected();">
        <!-- من -->
        <div class="fld">
          <div class="lbl">🛫 من</div>
          <select id="origin">
            <optgroup label="الدول العربية">
              <option value="CAI">مصر - القاهرة (CAI)</option>
              <option value="RUH">السعودية - الرياض (RUH)</option>
              <option value="JED">السعودية - جدة (JED)</option>
              <option value="DXB">الإمارات - دبي (DXB)</option>
              <option value="BAH" selected>البحرين - المنامة (BAH)</option>
              <!-- أضف بقية الدول العربية حسب الحاجة -->
            </optgroup>
            <optgroup label="وجهات سياحية أجنبية">
              <option value="IST">تركيا - إسطنبول (IST)</option>
              <option value="CDG">فرنسا - باريس (CDG)</option>
              <option value="LHR">بريطانيا - لندن (LHR)</option>
              <option value="FCO">إيطاليا - روما (FCO)</option>
              <option value="BCN">إسبانيا - برشلونة (BCN)</option>
              <!-- أضف وجهات أخرى -->
            </optgroup>
          </select>
        </div>

        <!-- إلى -->
        <div class="fld">
          <div class="lbl">🛬 إلى</div>
          <select id="destination">
            <optgroup label="الدول العربية">
              <option value="CAI" selected>مصر - القاهرة (CAI)</option>
              <option value="RUH">السعودية - الرياض (RUH)</option>
              <option value="DXB">الإمارات - دبي (DXB)</option>
              <option value="AMM">الأردن - عمّان (AMM)</option>
            </optgroup>
            <optgroup label="وجهات سياحية أجنبية">
              <option value="IST">تركيا - إسطنبول (IST)</option>
              <option value="CDG">فرنسا - باريس (CDG)</option>
              <option value="LHR">بريطانيا - لندن (LHR)</option>
              <option value="BCN">إسبانيا - برشلونة (BCN)</option>
            </optgroup>
          </select>
        </div>

        <!-- التواريخ -->
        <div class="fld">
          <div class="lbl">📅 تاريخ الذهاب</div>
          <input id="dep" type="date">
        </div>
        <div class="fld">
          <div class="lbl">↩️ تاريخ العودة</div>
          <input id="ret" type="date">
        </div>

        <!-- عدد المسافرين -->
        <div class="fld">
          <div class="lbl">👥 عدد المسافرين</div>
          <input id="pax" type="number" min="1" value="1">
        </div>

        <!-- الدرجة -->
        <div class="fld">
          <div class="lbl">💺 الدرجة</div>
          <select id="cabin">
            <option value="economy" selected>اقتصادية</option>
            <option value="business">أعمال</option>
            <option value="first">أولى</option>
          </select>
        </div>

        <!-- الموقع -->
        <div class="fld">
          <div class="lbl">🌐 الموقع</div>
          <select id="provider">
            <option value="google" selected>Google Flights</option>
            <option value="skyscanner">Skyscanner</option>
            <option value="kayak">KAYAK</option>
            <option value="wego">Wego</option>
            <option value="kiwi">Kiwi.com</option>
            <option value="expedia">Expedia</option>
          </select>
        </div>

        <button class="cta" type="submit">🔎 ابحث</button>
      </form>

      <div id="openInfo" class="card" style="display:none">
        <div class="meta" id="openSummary">—</div>
        <a class="link" id="openLink" target="_blank" rel="noopener">افتح الرابط يدويًا</a>
      </div>
    </div>
  </header>

  <script>
    function buildURL(provider, o, d, dep, ret, pax, cabin){
      switch(provider){
        case 'google': {
          let q = `flights from ${o} to ${d}`;
          if(dep) q += ` ${dep}`;
          if(ret) q += ` return ${ret}`;
          q += ` ${pax} adult ${cabin}`;
          return `https://www.google.com/travel/flights?hl=ar&q=${encodeURIComponent(q)}`;
        }
        case 'kayak': {
          let base = `https://www.kayak.ae/flights/${o}-${d}`;
          if(dep) base += `/${dep}`;
          if(ret) base += `/${ret}`;
          return `${base}?adults=${pax}&cabin=${cabin}&sort=price_a&lang=ar`;
        }
        case 'kiwi': {
          let base = `https://www.kiwi.com/ar/search/results/${o}/${d}`;
          if(dep) base += `/${dep}`;
          if(ret) base += `/${ret}`;
          return base + `/?adults=${pax}&cabinClass=${cabin}`;
        }
        case 'expedia': {
          const base = 'https://www.expedia.com/Flights-Search';
          if(dep && ret){
            return `${base}?trip=roundtrip&leg1=from:${o},to:${d},departure:${dep}TANYT&leg2=from:${d},to:${o},departure:${ret}TANYT&passengers=adults:${pax}&cabinclass=${cabin}&mode=search`;
          }
          if(dep){
            return `${base}?trip=oneway&leg1=from:${o},to:${d},departure:${dep}TANYT&passengers=adults:${pax}&cabinclass=${cabin}&mode=search`;
          }
          return `${base}?trip=oneway&leg1=from:${o},to:${d}&passengers=adults:${pax}&cabinclass=${cabin}&mode=search`;
        }
        case 'skyscanner':
          return `https://www.skyscanner.net/transport/flights/${o}/${d}/?adults=${pax}&cabinclass=${cabin}&locale=ar-SA`;
        case 'wego':
          return `https://www.wego.ae/flights/${o}-${d}?adults=${pax}&cabin=${cabin}`;
        default: return '#';
      }
    }

    function openSelected(){
      const o   = document.getElementById('origin').value;
      const d   = document.getElementById('destination').value;
      const p   = document.getElementById('provider').value;
      const dep = document.getElementById('dep').value;
      const ret = document.getElementById('ret').value;
      const pax = document.getElementById('pax').value || 1;
      const cabin = document.getElementById('cabin').value;

      if(!o || !d){ alert('اختر: من / إلى'); return; }

      const url = buildURL(p, o, d, dep, ret, pax, cabin);
      const win = window.open(url, '_blank', 'noopener');

      const info = document.getElementById('openInfo');
      const link = document.getElementById('openLink');
      const sum  = document.getElementById('openSummary');
      info.style.display='block';
      sum.textContent = `المسار: ${o} → ${d} — ${pax} راكب — ${cabin}`
        + (dep? ` — ذهاب: ${dep}`:'') + (ret? ` — عودة: ${ret}`:'');
      link.href = url;

      if(!win){ alert('إذا لم يُفتح الرابط تلقائيًا، اضغط "افتح الرابط يدويًا".'); }
    }
  </script>
</body>
</html>
