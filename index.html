<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Ù„ØªØ± Ù‡Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ â€” Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ·Ø¨Ø§Ø¹Ø© A4</title>
<meta name="description" content="Ø£Ù†Ø´Ø¦ Ù„ØªØ± Ù‡Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ A4 Ù…Ø¹ Ø®Ø§Ù†Ø§Øª ØªØ¹Ø¨Ø¦Ø©ØŒ ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†ØŒ ÙˆØ®ØªÙ… ÙˆØ³ÙˆØ´ÙŠØ§Ù„ â€” ØªØµÙ…ÙŠÙ… Ø£Ø³ÙˆØ¯/Ø°Ù‡Ø¨ÙŠ Ù…ØªØ¬Ø§ÙˆØ¨ ÙˆÙ…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«." />
<meta name="keywords" content="Ù„ØªØ± Ù‡Ø¯, Ø®Ø·Ø§Ø¨ Ø±Ø³Ù…ÙŠ, Letterhead, Ù†Ù…ÙˆØ°Ø¬, ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†, Ø®ØªÙ…, Ø¹Ø±Ø¨ÙŠ, A4, PDF, Ø³ÙˆØ´ÙŠØ§Ù„" />
<link rel="canonical" href="https://example.com/letterhead" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Ù„ØªØ± Ù‡Ø¯ Ø§Ø­ØªØ±Ø§ÙÙŠ â€” Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ·Ø¨Ø§Ø¹Ø© A4" />
<meta property="og:description" content="Ù…ÙˆÙ„Ø¯ Ù„ØªØ± Ù‡Ø¯ Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ù…Ø¹ ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ÙˆØ®ØªÙ… ÙˆØ³ÙˆØ´ÙŠØ§Ù„." />
<meta property="og:locale" content="ar_AR" />
<meta name="robots" content="index,follow" />
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Ù…ÙˆÙ„Ø¯ Ù„ØªØ± Ù‡Ø¯",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web",
  "offers": {"@type":"Offer","price":"0","priceCurrency":"USD"}
}
</script>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --gold:#C6A14A; --gold-soft:#ead89c; --black:#0b0f19; --ink:#111827; --muted:#6b7280; --paper:#fff;
  }
  *{box-sizing:border-box; -webkit-print-color-adjust:exact; print-color-adjust:exact}
  html,body{height:100%}
  body{margin:0; background:#f6f7f9; color:var(--ink); font-family:"Cairo",system-ui,Segoe UI,Roboto,Helvetica,Arial; font-size:16px; line-height:1.6}

  /* Ø§Ù„ØªØ®Ø·ÙŠØ· */
  .wrap{max-width:1200px; margin:auto; padding:14px; display:grid; grid-template-columns:430px 1fr; gap:14px}
  @media (max-width:1024px){ .wrap{grid-template-columns:1fr} }

  .card{background:#fff; border:1px solid #e5e7eb; border-radius:14px; box-shadow:0 10px 26px rgba(0,0,0,.06); overflow:hidden}
  .hd{padding:14px 16px; background:linear-gradient(90deg,var(--black),#1b2335); color:#fff; font-weight:800}
  .bd{padding:16px}

  /* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
  label{display:block; font-size:14px; color:var(--muted); margin:10px 2px 6px}
  input,select,textarea{width:100%; padding:14px 12px; border:1px solid #dfe3ea; border-radius:12px; font-size:16px; background:#fff}
  textarea{min-height:130px; resize:vertical}
  .grid{display:grid; gap:12px}
  .g2{grid-template-columns:1fr 1fr}
  .g3{grid-template-columns:1fr 1fr 1fr}
  .g4{grid-template-columns:1fr 1fr 1fr 1fr}
  @media (max-width:720px){ .g2,.g3,.g4{grid-template-columns:1fr} }

  .switch{display:flex; align-items:center; gap:10px; margin-top:8px}
  .switch input{width:auto}

  /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
  .btns{display:grid; gap:10px; grid-template-columns:1fr 1fr}
  @media (max-width:720px){ .btns{grid-template-columns:1fr} }
  .btn{border:0; border-radius:12px; padding:16px; font-weight:800; font-size:17px; cursor:pointer; width:100%}
  .btn.primary{background:var(--gold); color:#000; box-shadow:0 10px 20px rgba(198,161,74,.25)}
  .btn.dark{background:var(--black); color:#fff}
  .btn.ghost{background:#eef2f7; color:#111}

  /* Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…ØªØ¬Ø§ÙˆØ¨Ø© (ØªØµØºÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ) */
  .preview{width:100%; text-align:center; overflow:hidden; padding:10px}
  .scale-box{display:inline-block; transform-origin:top center}

  /* Ø§Ù„ÙˆØ±Ù‚Ø© A4 Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
  #page{
    width:210mm; height:297mm; background:var(--paper); margin:auto; position:relative; overflow:hidden;
    border:1px solid #e5e7eb; border-radius:14px; box-shadow:0 18px 48px rgba(0,0,0,.08);
  }

  /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
  .lh{background:linear-gradient(90deg,var(--black),#121828); color:#fff; padding:14px 18px; display:flex; align-items:center; gap:10px}
  .logo{width:40px; height:40px; border-radius:10px; background:linear-gradient(135deg,var(--gold),var(--gold-soft)); color:#000; display:grid; place-items:center; font-weight:900}
  .brand-name{font-weight:800; font-size:20px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70%}
  .gold-line{height:6px; background:linear-gradient(90deg,var(--gold-soft),var(--gold),#a6842a)}

  /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
  .doc{padding:12mm 18mm 46mm; height:calc(297mm - 56px - 6px - 46mm); overflow:auto}
  .meta{font-size:13px; color:var(--muted); display:flex; justify-content:space-between; border-bottom:1px dashed #e5e7eb; padding-bottom:6px}
  .address{margin-top:6px; font-size:12px; color:#4b5563}
  .title{text-align:center; font-size:26px; font-weight:800; margin:12px 0 8px}
  .content{font-size:16px; line-height:1.9; text-align:justify; text-justify:inter-word}

  /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
  .ft{
    position:absolute; left:0; right:0; bottom:0; height:46mm; padding:8mm 18mm 10mm;
    border-top:3px solid var(--gold);
    display:flex; align-items:flex-end; justify-content:space-between; gap:10px;
  }
  .stamp-box{
    width:48mm; min-height:22mm; padding:8px 10px; border:2px solid #111; border-radius:10px;
    transform:rotate(-1.2deg); color:#111; font-size:13px; font-weight:700;
    background:radial-gradient(circle at 30% 30%, rgba(0,0,0,.03), transparent 45%),
               repeating-linear-gradient(0deg, rgba(0,0,0,.02), rgba(0,0,0,.02) 2px, transparent 2px, transparent 4px);
  }
  .stamp-line{direction:ltr; text-align:left}
  .social-block{display:flex; gap:12px; font-size:12px; align-items:center}
  .social-item{display:flex; gap:4px; align-items:center}
  .social-item svg{width:14px; height:14px}
  .identity{text-align:right; font-size:13px; line-height:1.5}
  .identity strong{font-size:14px}
  .contact-line{direction:ltr; font-size:13px}
  .sig{margin-top:6px; min-height:28px}
  .sig img{max-height:28px; display:block; margin-inline-start:auto}

  /* Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† */
  .sig-pad{background:#fff; border:1px dashed #cbd5e1; border-radius:12px; padding:10px}
  canvas#sigCanvas{width:100%; height:160px; background:#fff; border:1px solid #e5e7eb; border-radius:10px; touch-action:none}

  /* Ø·Ø¨Ø§Ø¹Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) */
  @page{size:A4; margin:0}
  @media print{
    body *{visibility:hidden}
    #page, #page *{visibility:visible}
    #page{position:absolute; left:0; top:0; transform:none; box-shadow:none}
  }
</style>
</head>
<body>

<main class="wrap">
  <!-- ========== Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) ========== -->
  <section class="card" itemscope itemtype="https://schema.org/Form">
    <div class="hd">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø·Ø§Ø¨</div>
    <div class="bd">
      <div class="grid">
        <div><label>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label><input id="company" itemprop="name" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø±ÙƒØ© Ø§Ù„Ø£ÙÙ‚ Ù„Ù„ØªØ¬Ø§Ø±Ø©"></div>

        <div class="g2">
          <div>
            <label>ÙƒÙˆØ¯ Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
            <select id="countryCode">
              <!-- ÙƒÙ„ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ø§ÙØªØ±Ø§Ø¶ÙŠ) -->
              <option value="+213">ğŸ‡©ğŸ‡¿ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± (+213)</option>
              <option value="+973" selected>ğŸ‡§ğŸ‡­ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† (+973)</option>
              <option value="+269">ğŸ‡°ğŸ‡² Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø± (+269)</option>
              <option value="+253">ğŸ‡©ğŸ‡¯ Ø¬ÙŠØ¨ÙˆØªÙŠ (+253)</option>
              <option value="+20">ğŸ‡ªğŸ‡¬ Ù…ØµØ± (+20)</option>
              <option value="+964">ğŸ‡®ğŸ‡¶ Ø§Ù„Ø¹Ø±Ø§Ù‚ (+964)</option>
              <option value="+962">ğŸ‡¯ğŸ‡´ Ø§Ù„Ø£Ø±Ø¯Ù† (+962)</option>
              <option value="+965">ğŸ‡°ğŸ‡¼ Ø§Ù„ÙƒÙˆÙŠØª (+965)</option>
              <option value="+961">ğŸ‡±ğŸ‡§ Ù„Ø¨Ù†Ø§Ù† (+961)</option>
              <option value="+218">ğŸ‡±ğŸ‡¾ Ù„ÙŠØ¨ÙŠØ§ (+218)</option>
              <option value="+222">ğŸ‡²ğŸ‡· Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§ (+222)</option>
              <option value="+212">ğŸ‡²ğŸ‡¦ Ø§Ù„Ù…ØºØ±Ø¨ (+212)</option>
              <option value="+968">ğŸ‡´ğŸ‡² Ø¹ÙÙ…Ø§Ù† (+968)</option>
              <option value="+970">ğŸ‡µğŸ‡¸ ÙÙ„Ø³Ø·ÙŠÙ† (+970)</option>
              <option value="+974">ğŸ‡¶ğŸ‡¦ Ù‚Ø·Ø± (+974)</option>
              <option value="+966">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (+966)</option>
              <option value="+252">ğŸ‡¸ğŸ‡´ Ø§Ù„ØµÙˆÙ…Ø§Ù„ (+252)</option>
              <option value="+249">ğŸ‡¸ğŸ‡© Ø§Ù„Ø³ÙˆØ¯Ø§Ù† (+249)</option>
              <option value="+963">ğŸ‡¸ğŸ‡¾ Ø³ÙˆØ±ÙŠØ§ (+963)</option>
              <option value="+216">ğŸ‡¹ğŸ‡³ ØªÙˆÙ†Ø³ (+216)</option>
              <option value="+971">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª (+971)</option>
              <option value="+967">ğŸ‡¾ğŸ‡ª Ø§Ù„ÙŠÙ…Ù† (+967)</option>
            </select>
          </div>
          <div><label>Ø±Ù‚Ù… Ø§Ù„Ø§ØªØµØ§Ù„</label><input id="phone" type="tel" placeholder="3333 3333"></div>
        </div>

        <div><label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label><input id="email" type="email" placeholder="name@example.com"></div>
        <div><label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label><input id="titleIn" type="text" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©"></div>
        <div><label>Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label><textarea id="contentIn" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§..."></textarea></div>

        <div class="g2">
          <div><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠ (Ù„Ù„ØªÙˆÙ‚ÙŠØ¹)</label><input id="personNameIn" type="text" placeholder="Ù…Ø«Ø§Ù„: ÙØ§Ø¶Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³"></div>
          <div><label>Ø§Ù„ØµÙØ© / Ø§Ù„ÙˆØ¸ÙŠÙØ©</label><input id="personRoleIn" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…"></div>
        </div>

        <div class="g2">
          <div><label>ØµÙØ© Ø¹Ù…Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input id="siteRoleIn" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„ÙˆØ·Ù†ÙŠØ©"></div>
          <div><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label><input id="addressIn" type="text" placeholder="Ø§Ù„Ù…Ù†Ø§Ù…Ø© - Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†"></div>
        </div>

        <div class="g2">
          <div><label>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ (CR)</label><input id="cr" type="text" placeholder="555432"></div>
          <div><label>Ù…Ø±Ø¬Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><input id="refIn" type="text" placeholder="â€”"></div>
        </div>

        <div class="g4">
          <div><label>Instagram</label><input id="igIn" type="text" placeholder="@brand"></div>
          <div><label>Twitter / X</label><input id="twIn" type="text" placeholder="@brand"></div>
          <div><label>Facebook</label><input id="fbIn" type="text" placeholder="/brand"></div>
          <div><label>LinkedIn</label><input id="lnIn" type="text" placeholder="/company/brand"></div>
        </div>

        <!-- ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† -->
        <div>
          <label>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <div class="sig-pad">
            <canvas id="sigCanvas"></canvas>
            <div class="switch">
              <button type="button" class="btn ghost" id="clearSig">Ù…Ø³Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</button>
              <label><input type="checkbox" id="useSignature" checked> Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙÙŠ Ø§Ù„Ù„ØªØ± Ù‡Ø¯</label>
            </div>
          </div>
        </div>

        <div class="btns">
          <button class="btn primary" id="applyBtn" type="button">ØªØ·Ø¨ÙŠÙ‚</button>
          <button class="btn dark" id="resetBtn" type="button">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (ØªØªØ­Ø¬Ù‘Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§) ========== -->
  <section class="card">
    <div class="hd">Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</div>
    <div class="bd preview">
      <div class="scale-box" id="scaleBox">
        <div id="page" itemscope itemtype="https://schema.org/Article">
          <header class="lh">
            <div class="logo" aria-hidden="true">â˜…</div>
            <div class="brand-name" id="brandName" itemprop="publisher">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</div>
          </header>
          <div class="gold-line" aria-hidden="true"></div>

          <main class="doc">
            <div class="meta">
              <div>Ø§Ù„ØªØ§Ø±ÙŠØ®: <span id="today"></span></div>
              <div>Ù…Ø±Ø¬Ø¹: <span id="refOut">â€”</span></div>
            </div>
            <div class="address" id="addressOut"></div>
            <h1 class="title" id="titleOut" itemprop="headline">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©</h1>
            <article class="content" id="contentOut" itemprop="articleBody">
              Ø³ÙŠØ¸Ù‡Ø± Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§ Ø¨Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø£Ø·Ø±Ø§Ù.
            </article>
          </main>

          <footer class="ft">
            <!-- ÙŠØ³Ø§Ø±: Ø§Ù„Ø®ØªÙ… -->
            <div class="stamp-box">
              <div class="stamp-name" id="stampCompany">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</div>
              <div class="stamp-line" id="crOut">CR: â€”</div>
              <div class="stamp-line" id="phoneOut">Tel: â€”</div>
            </div>

            <!-- ÙˆØ³Ø·: Ø³ÙˆØ´ÙŠØ§Ù„ -->
            <div class="social-block" id="socialBottom"></div>

            <!-- ÙŠÙ…ÙŠÙ†: Ù‡ÙˆÙŠØ© + ØªÙˆÙ‚ÙŠØ¹ -->
            <div class="identity">
              <div class="sig" id="sigHolder"></div>
              <strong id="personName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠ</strong><br>
              <span id="personRole">Ø§Ù„ØµÙØ© / Ø§Ù„ÙˆØ¸ÙŠÙØ©</span><br>
              <span id="siteRoleOut"></span><br>
              <span class="contact-line" id="emailOut">name@example.com</span>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  // ==== Ø«ÙˆØ§Ø¨Øª Ø§Ù„ØªØ­Ø¬ÙŠÙ… (A4 Ø¨Ø§Ù„Ø¨ÙƒØ³Ù„) ====
  const MM_TO_PX = 96/25.4;
  const PAGE_W = Math.round(210 * MM_TO_PX); // ~794px
  const PAGE_H = Math.round(297 * MM_TO_PX); // ~1123px

  // ==== Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø£Ø±Ù‚Ø§Ù… Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©) ====
  document.getElementById("today").textContent = new Date().toLocaleDateString("en-GB");

  // ==== ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ====
  const digitMap={'Ù ':'0','Ù¡':'1','Ù¢':'2','Ù£':'3','Ù¤':'4','Ù¥':'5','Ù¦':'6','Ù§':'7','Ù¨':'8','Ù©':'9','Û°':'0','Û±':'1','Û²':'2','Û³':'3','Û´':'4','Ûµ':'5','Û¶':'6','Û·':'7','Û¸':'8','Û¹':'9'};
  const normalizeDigits = s => (s||'').replace(/[Ù -Ù©Û°-Û¹]/g, d => digitMap[d] || d);

  // ==== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ====
  const company = document.getElementById('company');
  const countryCode = document.getElementById('countryCode');
  const phone = document.getElementById('phone');
  const email = document.getElementById('email');
  const titleIn = document.getElementById('titleIn');
  const contentIn = document.getElementById('contentIn');
  const personNameIn = document.getElementById('personNameIn');
  const personRoleIn = document.getElementById('personRoleIn');
  const siteRoleIn = document.getElementById('siteRoleIn');
  const addressIn = document.getElementById('addressIn');
  const cr = document.getElementById('cr');
  const refIn = document.getElementById('refIn');
  const igIn = document.getElementById('igIn');
  const twIn = document.getElementById('twIn');
  const fbIn = document.getElementById('fbIn');
  const lnIn = document.getElementById('lnIn');
  const useSignature = document.getElementById('useSignature');

  // ==== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ ====
  const brandName = document.getElementById('brandName');
  const titleOut = document.getElementById('titleOut');
  const contentOut = document.getElementById('contentOut');
  const refOut = document.getElementById('refOut');
  const addressOut = document.getElementById('addressOut');
  const stampCompany = document.getElementById('stampCompany');
  const crOut = document.getElementById('crOut');
  const phoneOut = document.getElementById('phoneOut');
  const personName = document.getElementById('personName');
  const personRole = document.getElementById('personRole');
  const siteRoleOut = document.getElementById('siteRoleOut');
  const emailOut = document.getElementById('emailOut');
  const socialBottom = document.getElementById('socialBottom');
  const sigHolder = document.getElementById('sigHolder');

  // ==== Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ ====
  const icons = {
    ig:'<svg viewBox="0 0 24 24" fill="#E1306C"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm5 5a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7Zm6.5-.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z"/><circle cx="12" cy="12" r="3.3"/></svg>',
    tw:'<svg viewBox="0 0 24 24" fill="#000"><path d="M13.7 10.6 21 2h-1.7l-6.2 7.4L8.2 2H2l7.6 11L2 22h1.7l6.6-7.8L15.8 22H22l-8.3-11.4Z"/></svg>',
    fb:'<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M22 12a10 10 0 1 0-11.6 9.9v-7H7.7V12h2.7V9.7c0-2.7 1.6-4.2 4-4.2 1.2 0 2.4.2 2.4.2v2.6h-1.4c-1.3 0-1.7.8-1.7 1.6V12h2.9l-.46 2.9h-2.4v7A10 10 0 0 0 22 12"/></svg>',
    ln:'<svg viewBox="0 0 24 24" fill="#0A66C2"><path d="M4.98 3.5a2.5 2.5 0 1 1 0 5.001 2.5 2.5 0 0 1 0-5zM3 9h4v12H3zM9 9h3.8v1.6h.1c.5-.9 1.8-1.9 3.7-1.9 4 0 4.8 2.6 4.8 6v6H17v-5.3c0-1.3 0-3-1.9-3s-2.2 1.4-2.2 2.9V21H9z"/></svg>'
  };

  // ==== ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© ====
  function fullPhone(){
    const cc = normalizeDigits(countryCode.value || '');
    const p  = normalizeDigits(phone.value || '');
    return (cc && p) ? `${cc} ${p}` : (p || '');
  }

  function buildSocial(){
    socialBottom.innerHTML='';
    [{val:igIn.value.trim(),key:'ig'},{val:twIn.value.trim(),key:'tw'},{val:fbIn.value.trim(),key:'fb'},{val:lnIn.value.trim(),key:'ln'}]
      .forEach(x=>{
        if(!x.val) return;
        const d=document.createElement('div');
        d.className='social-item';
        d.innerHTML=icons[x.key]+'<span>'+x.val+'</span>';
        socialBottom.appendChild(d);
      });
  }

  function applyChanges(){
    brandName.textContent = company.value.trim() || 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©';
    stampCompany.textContent = brandName.textContent;

    titleOut.textContent = titleIn.value.trim() || 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©';
    contentOut.textContent = normalizeDigits(contentIn.value) || 'â€”';

    addressOut.textContent = addressIn.value.trim() ? ('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ' + addressIn.value.trim()) : '';
    refOut.textContent = normalizeDigits(refIn.value.trim() || 'â€”');

    crOut.textContent = 'CR: ' + (normalizeDigits(cr.value) || 'â€”');
    phoneOut.textContent = 'Tel: ' + (fullPhone() || 'â€”');

    personName.textContent = personNameIn.value.trim() || 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠ';
    personRole.textContent = personRoleIn.value.trim() || 'Ø§Ù„ØµÙØ© / Ø§Ù„ÙˆØ¸ÙŠÙØ©';
    siteRoleOut.textContent = siteRoleIn.value.trim() ? ('ØµÙØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹: ' + siteRoleIn.value.trim()) : '';
    emailOut.textContent = email.value.trim() || 'name@example.com';

    buildSocial();
    // ØªÙˆÙ‚ÙŠØ¹
    sigHolder.innerHTML='';
    if(useSignature.checked && sigDataURL){
      const img=new Image(); img.src=sigDataURL; img.alt='Ø§Ù„ØªÙˆÙ‚ÙŠØ¹';
      sigHolder.appendChild(img);
    }
  }

  // Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
  ['phone','cr','contentIn','titleIn','refIn'].forEach(id=>{
    const el=document.getElementById(id);
    el.addEventListener('input',()=> el.value = normalizeDigits(el.value));
  });

  // ==== ØªÙˆÙ‚ÙŠØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ====
  const canvas = document.getElementById('sigCanvas');
  const ctx = canvas.getContext('2d');
  const clearSigBtn = document.getElementById('clearSig');
  let drawing=false, sigDataURL='';

  function resizeCanvas(){
    const ratio = Math.max(window.devicePixelRatio || 1, 1);
    canvas.width = canvas.clientWidth * ratio;
    canvas.height = canvas.clientHeight * ratio;
    ctx.scale(ratio, ratio);
    ctx.lineWidth = 2.2; ctx.lineCap='round'; ctx.strokeStyle = '#111';
  }
  function pos(e){
    const r=canvas.getBoundingClientRect();
    const x=(e.touches? e.touches[0].clientX : e.clientX) - r.left;
    const y=(e.touches? e.touches[0].clientY : e.clientY) - r.top;
    return {x,y};
  }
  function start(e){ drawing=true; const p=pos(e); ctx.beginPath(); ctx.moveTo(p.x,p.y); e.preventDefault(); }
  function move(e){ if(!drawing) return; const p=pos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); e.preventDefault(); }
  function end(){ drawing=false; sigDataURL = canvas.toDataURL('image/png'); applyChanges(); }

  canvas.addEventListener('mousedown',start); canvas.addEventListener('mousemove',move); window.addEventListener('mouseup',end);
  canvas.addEventListener('touchstart',start,{passive:false}); canvas.addEventListener('touchmove',move,{passive:false}); canvas.addEventListener('touchend',end);

  clearSigBtn.addEventListener('click',()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); sigDataURL=''; applyChanges(); });

  // ==== ØªØ­Ø¬ÙŠÙ… Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¬ÙˆØ§Ù„ ====
  const scaleBox = document.getElementById('scaleBox');
  function scalePreview(){
    const parent = scaleBox.parentElement;
    const avail = parent.clientWidth - 8; // Ù‡Ø§Ù…Ø´ ØµØºÙŠØ±
    const s = Math.min(1, avail / PAGE_W);
    scaleBox.style.width = PAGE_W + 'px';
    scaleBox.style.height = PAGE_H + 'px';
    scaleBox.style.transform = `scale(${s})`;
    parent.style.minHeight = (PAGE_H * s) + 'px';
  }

  // Ø£Ø²Ø±Ø§Ø±
  document.getElementById('applyBtn').addEventListener('click', applyChanges);
  document.getElementById('resetBtn').addEventListener('click', ()=>{
    document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea').forEach(i=> i.value='');
    countryCode.value = '+973'; // Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
    ctx.clearRect(0,0,canvas.width,canvas.height); sigDataURL='';
    applyChanges();
  });
  useSignature.addEventListener('change', applyChanges);

  // ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ©
  (document.fonts?.ready || Promise.resolve()).then(()=>{
    resizeCanvas();
    applyChanges();
    scalePreview();
    window.addEventListener('resize', ()=>{ resizeCanvas(); scalePreview(); }, {passive:true});
    setTimeout(scalePreview, 60); // Ù„Ø¶Ø¨Ø· Ø£ÙŠ ØªØºÙŠÙ‘Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
  });
</script>
</body>
</html>
