<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>مولّد سيرة احترافية – عمودان</title>
<style>
  :root{
    --bg:#f3f4f6;--text:#1f2937;--muted:#6b7280;--line:#e5e7eb;
    --brand:#b29a8f; /* لون العمود الجانبي */
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:#1f6feb}

  /* شريط علوي */
  header.app{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);
    padding:10px 16px;display:flex;gap:10px;align-items:center;z-index:5}
  header.app h1{margin:0;font-size:18px;flex:1}
  .btn{border:0;border-radius:10px;padding:12px 14px;font-weight:700;cursor:pointer}
  .btn.primary{background:#1f6feb;color:#fff}
  .btn.secondary{background:#1118270d;color:#111}
  .btn.ghost{background:transparent;border:1px dashed var(--line);color:#111}

  /* تخطيط الصفحة */
  .container{display:grid;grid-template-columns:380px 1fr;gap:18px;max-width:1200px;margin:18px auto;padding:0 16px}
  .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px}
  .card h2{font-size:16px;margin:0 0 8px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  label{display:block;margin-bottom:4px;color:var(--muted);font-size:13px}
  input,textarea,select{width:100%;padding:12px 10px;border:1px solid var(--line);border-radius:10px;font-size:15px;background:#fff}
  textarea{min-height:88px;resize:vertical}
  .section{margin-top:14px;border-top:1px dashed var(--line);padding-top:14px}
  .item{border:1px dashed var(--line);border-radius:10px;padding:10px;margin-top:10px;background:#fafafa;position:relative}
  .item .remove{position:absolute;inset-inline-start:8px;top:8px;background:#fff;border:1px solid #ef4444;color:#ef4444}

  /* معاينة السيرة – عمودان */
  .cv-wrap{}
  .cv{
    width:100%;
    max-width:210mm;               /* يمتلئ على الجوال ويثبت على A4 عند الطباعة */
    min-height:297mm;
    margin:0 auto;background:#fff;box-shadow:0 10px 30px rgba(0,0,0,.08);
    display:grid;grid-template-columns:65% 35%;
  }
  main.content{padding:20mm 15mm}
  aside.sidebar{background:var(--brand);color:#fff;padding:20mm 12mm}
  h1{margin:0;font-size:26px;line-height:1.2}
  .role{font-size:16px;margin:6px 0 10px;color:#eee}
  h2{font-size:16px;margin:16px 0 6px}
  p{margin:4px 0;font-size:13px;line-height:1.7}
  ul{margin:6px 0 12px;padding:0 20px;font-size:13px}
  .photo{width:110px;height:110px;border-radius:50%;object-fit:cover;margin:0 0 14px;border:4px solid #ffffff40;background:#ffffff22}
  .chip{display:inline-block;border:1px solid #ffffff55;color:#fff;border-radius:999px;padding:4px 9px;margin:4px 4px 0 0;font-size:12px}
  .side-block{margin-bottom:20px}
  .side-block h3{font-size:15px;margin:10px 0 8px;color:#fff}
  .bar{height:8px;background:#ffffff2b;border-radius:999px;overflow:hidden;margin:4px 0 10px}
  .bar span{display:block;height:100%;background:#fff}

  .muted{color:#6b7280}
  .meta{color:#6b7280;font-size:12px;margin:2px 0 6px}
  .job{margin-bottom:12px}
  .job .top{display:flex;justify-content:space-between;gap:8px;font-weight:700}
  .divider{height:1px;background:var(--line);margin:10px 0}

  /* استجابة */
  @media (max-width: 900px){
    .container{grid-template-columns:1fr}
    .row{grid-template-columns:1fr}
    .cv{grid-template-columns:1fr;min-height:auto}
    aside.sidebar{border-bottom:1px solid #00000022}
    .btn{width:100%} .stack>.btn{flex:1}
  }
  @media (max-width:420px){.card{padding:12px}}

  /* طباعة */
  @media print{
    header.app,.card{display:none!important}
    body{background:#fff}
    .cv{box-shadow:none;margin:0;width:210mm;min-height:297mm;grid-template-columns:65% 35%}
    @page{size:A4;margin:0}
  }
</style>
</head>
<body>

<header class="app">
  <h1>مولّد سيرة احترافية (تصميم عمودين)</h1>
  <div class="stack" style="display:flex;gap:8px;flex-wrap:wrap;min-width:260px">
    <button class="btn primary" onclick="generate()">تحديث المعاينة</button>
    <button class="btn secondary" onclick="window.print()">تحميل PDF</button>
    <button class="btn ghost" onclick="clearAll()">تفريغ الحقول</button>
  </div>
</header>

<div class="container">
  <!-- ===== النموذج ===== -->
  <div class="card">
    <h2>البيانات الأساسية</h2>
    <div class="row">
      <div><label>الاسم الكامل</label><input id="name" placeholder="SAMIRA HADID"></div>
      <div><label>المسمّى الوظيفي</label><input id="role" placeholder="مصممة جرافيك"></div>
    </div>
    <div class="row section">
      <div><label>البريد</label><input id="email" type="email" inputmode="email" placeholder="hello@example.com"></div>
      <div><label>الهاتف</label><input id="phone" inputmode="tel" placeholder="+123-456-7890"></div>
    </div>
    <div class="row">
      <div><label>العنوان</label><input id="address" placeholder="123 Anywhere St., Any City"></div>
      <div><label>رابط صورة (اختياري)</label><input id="photo" placeholder="https://…/avatar.jpg"></div>
    </div>
    <div class="section">
      <label>الملخص</label>
      <textarea id="summary" placeholder="وصف مختصر عن خبرتك وقيمتك المضافة"></textarea>
    </div>

    <div class="section">
      <h2>الخبرات</h2>
      <div id="expList"></div>
      <button class="btn ghost" type="button" onclick="addExp()">+ إضافة خبرة</button>
    </div>

    <div class="section">
      <h2>المؤهلات العلمية</h2>
      <div id="eduList"></div>
      <button class="btn ghost" type="button" onclick="addEdu()">+ إضافة مؤهل</button>
    </div>

    <div class="section">
      <h2>المهارات (تظهر كشرائط في العمود الجانبي)</h2>
      <div class="row">
        <div><label>المهارة</label><input id="skillName" placeholder="Adobe Photoshop"></div>
        <div><label>النسبة %</label><input id="skillPct" type="number" min="0" max="100" placeholder="85"></div>
      </div>
      <div style="margin-top:8px"><button class="btn secondary" type="button" onclick="addSkill()">إضافة مهارة</button></div>
      <div id="skillsBox"></div>
    </div>

    <div class="section">
      <h2>اللغات</h2>
      <div class="row">
        <div><label>اللغة</label><input id="langName" placeholder="العربية"></div>
        <div><label>النسبة %</label><input id="langPct" type="number" min="0" max="100" placeholder="95"></div>
      </div>
      <div style="margin-top:8px"><button class="btn secondary" type="button" onclick="addLang()">إضافة لغة</button></div>
      <div id="langsBox"></div>
    </div>

    <div class="section">
      <h2>الهوايات</h2>
      <div class="row">
        <div><label>الهواية</label><input id="hobbyInput" placeholder="ركوب الدراجة"></div>
        <div style="display:flex;align-items:end"><button class="btn secondary" type="button" onclick="addHobby()">إضافة</button></div>
      </div>
      <div id="hobbiesBox" style="margin-top:8px"></div>
    </div>

    <div class="section">
      <h2>المراجع</h2>
      <div id="refList"></div>
      <button class="btn ghost" type="button" onclick="addRef()">+ إضافة مرجع</button>
    </div>

    <div class="section">
      <button class="btn primary" type="button" onclick="generate()">تحديث المعاينة</button>
      <span style="font-size:12px;color:var(--muted)">يتم الحفظ تلقائيًا في المتصفح.</span>
    </div>
  </div>

  <!-- ===== المعاينة ===== -->
  <div class="cv-wrap">
    <div class="cv" id="cv">
      <!-- العمود الرئيسي (يسار) -->
      <main class="content">
        <h1 id="p_name">SAMIRA HADID</h1>
        <div class="role" id="p_role">مصممة جرافيك</div>
        <p id="p_summary" class="muted">ملخص مختصر عن الخبرة والإنجازات…</p>
        <div class="divider"></div>

        <h2>المؤهلات العلمية</h2>
        <div id="p_edus"></div>

        <h2>الخبرات العملية</h2>
        <div id="p_exps"></div>

        <h2>المهارات الاحترافية</h2>
        <ul id="p_softskills"><li>التصميم الجرافيكي</li><li>التصوير الفوتوغرافي</li><li>الرسوم المتحركة</li></ul>
      </main>

      <!-- العمود الجانبي (يمين) -->
      <aside class="sidebar">
        <img id="p_photo" class="photo" alt="photo" />
        <div class="side-block">
          <h3>معلومات الاتصال</h3>
          <p id="p_phone">📞 +123-456-7890</p>
          <p id="p_email">📧 hello@example.com</p>
          <p id="p_address">🏠 123 Anywhere St., Any City</p>
        </div>

        <div class="side-block">
          <h3>المهارات</h3>
          <div id="p_skills"></div>
        </div>

        <div class="side-block">
          <h3>اللغات</h3>
          <div id="p_langs"></div>
        </div>

        <div class="side-block">
          <h3>الهوايات</h3>
          <p id="p_hobbies" style="white-space:pre-line"></p>
        </div>

        <div class="side-block">
          <h3>المراجع</h3>
          <div id="p_refs"></div>
        </div>
      </aside>
    </div>
  </div>
</div>

<script>
/* ====== أدوات مساعدة ====== */
const $ = s => document.querySelector(s);
const el = (t,props={},...kids)=>{const e=document.createElement(t);Object.assign(e,props);kids.forEach(k=>e.append(k));return e;}
function escapeHTML(s){return (s||'').replace(/[&<>'"]/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[m]));}
function save(){localStorage.setItem('cv-2col', JSON.stringify(collect()));}
function load(){
  const raw=localStorage.getItem('cv-2col');
  if(!raw){ seed(); return; }
  try{fill(JSON.parse(raw));}catch{seed();}
}

/* ====== عناصر ديناميكية للنموذج ====== */
function mkItem(fields){
  const c=el('div',{className:'item'}); 
  c.append(el('button',{className:'btn remove',type:'button',onclick:()=>c.remove()},'حذف'));
  fields.forEach(f=>c.append(f));
  return c;
}
function inputField(lbl,name,val){const w=el('div');w.append(el('label',{},lbl),el('input',{value:val||'',dataset:{name}}));return w;}
function textField(lbl,name,val){const w=el('div');w.append(el('label',{},lbl),el('textarea',{value:val||'',dataset:{name}}));return w;}
function row(a,b){const r=el('div',{className:'row'});r.append(a,b);return r;}

function addExp(pref={}){
  const it=mkItem([
    inputField('المسمى الوظيفي','title',pref.title),
    inputField('الشركة','company',pref.company),
    inputField('المدينة','city',pref.city),
    row(inputField('من','start',pref.start), inputField('إلى','end',pref.end)),
    textField('إنجازات (سطر لكل نقطة)','bullets',pref.bullets)
  ]);
  $('#expList').append(it);
}
function addEdu(pref={}){
  const it=mkItem([
    inputField('المؤسسة التعليمية','school',pref.school),
    inputField('المؤهل','degree',pref.degree),
    inputField('المدينة','city',pref.city),
    row(inputField('من','start',pref.start), inputField('إلى','end',pref.end)),
    textField('ملاحظات (اختياري)','notes',pref.notes),
  ]);
  $('#eduList').append(it);
}
function addRef(pref={}){
  const it=mkItem([
    inputField('الاسم','name',pref.name),
    inputField('المسمى/الصفة','title',pref.title),
    inputField('البريد','email',pref.email),
    inputField('الهاتف','phone',pref.phone),
  ]);
  $('#refList').append(it);
}
function addSkill(){
  const n=$('#skillName').value.trim(), p=+$('#skillPct').value;
  if(!n || isNaN(p)) return;
  const it=mkItem([inputField('المهارة','name',n), inputField('النسبة %','pct',p)]);
  $('#skillsBox').append(it); $('#skillName').value=''; $('#skillPct').value='';
}
function addLang(){
  const n=$('#langName').value.trim(), p=+$('#langPct').value;
  if(!n || isNaN(p)) return;
  const it=mkItem([inputField('اللغة','name',n), inputField('النسبة %','pct',p)]);
  $('#langsBox').append(it); $('#langName').value=''; $('#langPct').value='';
}
function addHobby(){
  const h=$('#hobbyInput').value.trim(); if(!h) return;
  const it=mkItem([inputField('الهواية','hobby',h)]);
  $('#hobbiesBox').append(it); $('#hobbyInput').value='';
}

/* ====== جمع/ملء البيانات ====== */
function collectList(parentSel){
  return [...document.querySelector(parentSel).children].map(div=>{
    const f=[...div.querySelectorAll('[data-name]')]; const o={}; f.forEach(x=>o[x.dataset.name]=x.value); return o;
  });
}
function collect(){
  return {
    name:$('#name').value, role:$('#role').value, email:$('#email').value, phone:$('#phone').value,
    address:$('#address').value, photo:$('#photo').value, summary:$('#summary').value,
    exps:collectList('#expList'), edus:collectList('#eduList'), refs:collectList('#refList'),
    skills:collectList('#skillsBox'), langs:collectList('#langsBox'), hobbies:collectList('#hobbiesBox')
  };
}
function fill(d){
  ['name','role','email','phone','address','photo','summary'].forEach(k=>{ if(d[k]!=null) $('#'+k).value=d[k]; });
  const fillList=(sel,fn,arr)=>{ $(sel).innerHTML=''; (arr||[]).forEach(fn); };
  fillList('#expList',addExp,d.exps); fillList('#eduList',addEdu,d.edus); fillList('#refList',addRef,d.refs);
  $('#skillsBox').innerHTML=''; (d.skills||[]).forEach(s=>{ $('#skillName').value=s.name||''; $('#skillPct').value=s.pct||''; addSkill(); });
  $('#langsBox').innerHTML=''; (d.langs||[]).forEach(l=>{ $('#langName').value=l.name||''; $('#langPct').value=l.pct||''; addLang(); });
  $('#hobbiesBox').innerHTML=''; (d.hobbies||[]).forEach(h=>{ $('#hobbyInput').value=h.hobby||''; addHobby(); });
  generate();
}

/* ====== إنشاء المعاينة ====== */
function generate(){
  const d=collect();

  // العنوان والملخص
  $('#p_name').textContent = d.name || 'الاسم الكامل';
  $('#p_role').textContent = d.role || 'المسمّى الوظيفي';
  $('#p_summary').textContent = d.summary || 'ملخص مختصر عن الخبرة والإنجازات…';

  // الصورة
  const img=$('#p_photo');
  if(d.photo){ img.src=d.photo; img.style.display='block'; } else { img.removeAttribute('src'); img.style.display='none'; }

  // الاتصال
  $('#p_phone').textContent = d.phone ? `📞 ${d.phone}` : '';
  $('#p_email').textContent = d.email ? `📧 ${d.email}` : '';
  $('#p_address').textContent = d.address ? `🏠 ${d.address}` : '';

  // التعليم
  const edus=(d.edus||[]).filter(e=>e.school||e.degree);
  $('#p_edus').innerHTML = edus.map(e=>{
    const meta=[e.city,[e.start,e.end].filter(Boolean).join(' – ')].filter(Boolean).join(' • ');
    return `<p><strong>${escapeHTML(e.degree||'')}</strong> — ${escapeHTML(e.school||'')}</p>
            <p class="meta">${escapeHTML(meta)}${e.notes? ' • '+escapeHTML(e.notes):''}</p>`;
  }).join('') || `<p class="muted">أضف مؤهلاتك التعليمية.</p>`;

  // الخبرات
  const exps=(d.exps||[]).filter(e=>e.title||e.company);
  $('#p_exps').innerHTML = exps.map(e=>{
    const meta=[e.city,[e.start,e.end].filter(Boolean).join(' – ')].filter(Boolean).join(' • ');
    const bullets=(e.bullets||'').split('\n').filter(Boolean).map(b=>`<li>${escapeHTML(b)}</li>`).join('');
    return `<div class="job">
      <div class="top"><div>${escapeHTML(e.title||'')}</div><div>${escapeHTML(e.company||'')}</div></div>
      <div class="meta">${escapeHTML(meta)}</div>
      ${bullets? `<ul>${bullets}</ul>`:''}
    </div>`;
  }).join('') || `<p class="muted">أضف خبراتك العملية.</p>`;

  // مهارات (شرائط في العمود الجانبي)
  $('#p_skills').innerHTML = (d.skills||[]).filter(s=>s.name).map(s=>{
    const pct=Math.max(0, Math.min(100, +s.pct||0));
    return `<p style="margin:6px 0 2px">${escapeHTML(s.name)} <span style="opacity:.8">(${pct}%)</span></p>
            <div class="bar"><span style="width:${pct}%"></span></div>`;
  }).join('') || `<p style="opacity:.8">أضف مهاراتك.</p>`;

  // لغات
  $('#p_langs').innerHTML = (d.langs||[]).filter(l=>l.name).map(l=>{
    const pct=Math.max(0, Math.min(100, +l.pct||0));
    return `<p style="margin:6px 0 2px">${escapeHTML(l.name)} <span style="opacity:.8">(${pct}%)</span></p>
            <div class="bar"><span style="width:${pct}%"></span></div>`;
  }).join('') || `<p style="opacity:.8">أضف اللغات.</p>`;

  // هوايات
  $('#p_hobbies').textContent = (d.hobbies||[]).map(h=>h.hobby).filter(Boolean).join(' · ') || '';

  // مراجع
  $('#p_refs').innerHTML = (d.refs||[]).filter(r=>r.name).map(r=>{
    const lines=[r.title, r.email, r.phone].filter(Boolean).map(x=>escapeHTML(x)).join(' — ');
    return `<p><strong>${escapeHTML(r.name)}</strong><br><span style="opacity:.9">${lines}</span></p>`;
  }).join('') || `<p style="opacity:.8">أضف مراجع إن أردت.</p>`;

  // حفظ
  save();
}

/* ====== بيانات افتراضية (Seed) ====== */
function seed(){
  $('#name').value='SAMIRA HADID';
  $('#role').value='مصممة جرافيك';
  $('#email').value='hello@reallygreatsite.com';
  $('#phone').value='+123-456-7890';
  $('#address').value='123 Anywhere St., Any City';
  $('#photo').value='https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=400&auto=format&fit=crop';
  $('#summary').value='مصممة جرافيك محترفة أعمل في تصميم الجرافيك والفنون التخطيطية وأجمع الصور والمواد المطبوعة ومؤثرات الرسوم المتحركة لإنشاء قطع تصميم.';

  addEdu({school:'جامعة الجامعة',degree:'ماجستير في فنون الوسائط المتعددة',city:'',start:'2015',end:'2017'});
  addEdu({school:'جامعة الجامعة',degree:'بكالوريوس في فنون الوسائط المتعددة',city:'',start:'2011',end:'2015'});

  addExp({title:'مصمم جرافيك خبير',company:'استوديو الجامعة للفنون والطباعة',city:'',start:'يناير 2022',end:'الآن',
          bullets:'تخصص معمّق في أعمال التصميم والتخطيط.\nإنتاج الصور الفوتوغرافية والمجلات.\nتنظيم الفعاليات.'});
  addExp({title:'مصمم جرافيك مبتدئ',company:'استوديو الجامعة للفنون والطباعة',city:'',start:'2018',end:'ديسمبر 2021',
          bullets:'المشاركة في التخطيط الإبداعي.\nإدارة محتوى السوشال.\nتصميم مطبوعات.'});

  // مهارات
  [['Adobe Photoshop',90],['Illustrator',85],['After Effects',75]].forEach(([n,p])=>{
    $('#skillName').value=n; $('#skillPct').value=p; addSkill();
  });
  // لغات
  [['اللغة الإنجليزية',70],['اللغة العربية',95],['اللغة التركية',85]].forEach(([n,p])=>{
    $('#langName').value=n; $('#langPct').value=p; addLang();
  });
  // هوايات
  $('#hobbyInput').value='ركوب الدراجة'; addHobby();
  $('#hobbyInput').value='السباحة'; addHobby();
  // مراجع
  addRef({name:'Murad Naser',title:'رئيس مجلس إدارة الشركة',email:'hello@reallygreatsite.com',phone:'+123-456-7890'});
  addRef({name:'Muhammad Patel',title:'منسق رئيسي للمعـهـد',email:'hello@reallygreatsite.com',phone:'+123-456-7890'});

  generate(); save();
}

/* ====== أدوات ====== */
function clearAll(){ if(!confirm('هل تريد تفريغ جميع الحقول؟')) return; localStorage.removeItem('cv-2col'); location.reload(); }
window.addEventListener('DOMContentLoaded', load);
</script>
</body>
</html>
