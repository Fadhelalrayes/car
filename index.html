<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>تذكرتك | قارن أسعار التذاكر</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f9fafb;--card:#fff;--ink:#0f172a;--muted:#6b7280;--line:#e5e7eb;--brand:#0ea5e9;--brand2:#0284c7;--shadow:0 12px 30px rgba(2,132,199,.12);--radius:18px;--ring:0 0 0 3px rgba(14,165,233,.25)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Cairo',sans-serif}
    header{background:#fff;border-bottom:1px solid var(--line)}
    .container{max-width:980px;margin:auto;padding:20px 16px}
    .brand{text-align:center}
    .brand .title{font-weight:900;font-size:32px;color:var(--brand)}
    .brand .tag{margin-top:6px;color:#374151;font-weight:700}
    form.search{display:grid;gap:12px;margin-top:18px}
    .fld{background:var(--card);border:2px solid var(--line);border-radius:18px;padding:14px 16px;box-shadow:var(--shadow)}
    .fld:focus-within{border-color:var(--brand);box-shadow:var(--shadow),var(--ring)}
    .lbl{font-size:13px;color:var(--muted);margin-bottom:6px}
    select,input{width:100%;border:0;outline:none;background:transparent;font-size:18px;padding:8px 0;color:var(--ink)}
    input[type=date]{font-size:16px;padding:6px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .cta{width:100%;background:linear-gradient(180deg,var(--brand),var(--brand2));color:#fff;border:0;border-radius:18px;padding:16px;font-weight:900;cursor:pointer;font-size:18px;box-shadow:var(--shadow)}
    .cta:hover{filter:brightness(.98)}
    footer{margin:18px auto 8px;max-width:980px;padding:0 16px;text-align:center;color:#475569}
    .credit{font-size:16px}
    .credit a{color:#0ea5e9;text-decoration:none;font-weight:900}
    .credit a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="title">تذكرتك</div>
        <div class="tag">استكشف أرخص أسعار تذاكر الطيران</div>
      </div>

      <form class="search" onsubmit="event.preventDefault(); openSelected();">
        <!-- من -->
        <div class="fld">
          <div class="lbl">من</div>
          <select id="origin"></select>
        </div>

        <!-- إلى -->
        <div class="fld">
          <div class="lbl">إلى</div>
          <select id="destination"></select>
        </div>

        <!-- التواريخ -->
        <div class="row2">
          <div class="fld">
            <div class="lbl">تاريخ الذهاب</div>
            <input id="dep" type="date">
          </div>
          <div class="fld">
            <div class="lbl">تاريخ العودة (اختياري)</div>
            <input id="ret" type="date">
          </div>
        </div>

        <!-- الركاب والدرجة -->
        <div class="fld">
          <div class="lbl">عدد المسافرين</div>
          <input id="pax" type="number" min="1" value="1">
        </div>
        <div class="fld">
          <div class="lbl">الدرجة</div>
          <select id="cabin">
            <option value="economy" selected>اقتصادية</option>
            <option value="business">أعمال</option>
            <option value="first">أولى</option>
          </select>
        </div>

        <!-- الموقع (المواقع المجربة) -->
        <div class="fld">
          <div class="lbl">الموقع</div>
          <select id="provider">
            <option value="skyscanner" selected>Skyscanner</option>
            <option value="kayak">KAYAK</option>
          </select>
        </div>

        <button class="cta" type="submit">ابحث 🔎</button>
      </form>
    </div>
  </header>

  <!-- تذييل: برمجة وتطوير + رابط واتساب على الاسم فقط -->
  <footer>
    <p class="credit">
      برمجة وتطوير:
      <a href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1&fbclid=PAQ0xDSwMnv7NleHRuA2FlbQIxMAABp2oJMBageU4aANPRAqwsPk5tJ2sjM1g7Zq0594hrCpD5dTFUxONved_jNhbs_aem_lMuYSkCzjYHAJwwNq4EKlw"
         target="_blank" rel="noopener">
        فاضل الريس
      </a>
    </p>
  </footer>

  <script>
    /***** 1) قاعدة بيانات المطارات: الدولة + المدينة + الكود IATA *****/
    // الدول العربية (مع عدة مطارات رئيسية)
    const ARAB_AIRPORTS = [
      // البحرين
      {country:'البحرين', city:'المنامة', code:'BAH'},
      // السعودية
      {country:'السعودية', city:'الرياض', code:'RUH'},
      {country:'السعودية', city:'جدة', code:'JED'},
      {country:'السعودية', city:'الدمام', code:'DMM'},
      {country:'السعودية', city:'المدينة', code:'MED'},
      {country:'السعودية', city:'أبها', code:'AHB'},
      {country:'السعودية', city:'القصيم', code:'ELQ'},
      {country:'السعودية', city:'جازان', code:'GIZ'},
      {country:'السعودية', city:'حائل', code:'HAS'},
      {country:'السعودية', city:'تبوك', code:'TUU'},
      {country:'السعودية', city:'العلا', code:'ULH'},
      // الإمارات
      {country:'الإمارات', city:'دبي', code:'DXB'},
      {country:'الإمارات', city:'أبوظبي', code:'AUH'},
      {country:'الإمارات', city:'الشارقة', code:'SHJ'},
      {country:'الإمارات', city:'العين', code:'AAN'},
      // قطر
      {country:'قطر', city:'الدوحة', code:'DOH'},
      // الكويت
      {country:'الكويت', city:'الكويت', code:'KWI'},
      // عمان
      {country:'عُمان', city:'مسقط', code:'MCT'},
      {country:'عُمان', city:'صلالة', code:'SLL'},
      // مصر
      {country:'مصر', city:'القاهرة', code:'CAI'},
      {country:'مصر', city:'الإسكندرية/برج العرب', code:'HBE'},
      {country:'مصر', city:'الغردقة', code:'HRG'},
      {country:'مصر', city:'شرم الشيخ', code:'SSH'},
      {country:'مصر', city:'الأقصر', code:'LXR'},
      {country:'مصر', city:'أسوان', code:'ASW'},
      // الأردن
      {country:'الأردن', city:'عمّان', code:'AMM'},
      {country:'الأردن', city:'العقبة', code:'AQJ'},
      // لبنان
      {country:'لبنان', city:'بيروت', code:'BEY'},
      // المغرب
      {country:'المغرب', city:'الدار البيضاء', code:'CMN'},
      {country:'المغرب', city:'الرباط', code:'RBA'},
      {country:'المغرب', city:'مراكش', code:'RAK'},
      {country:'المغرب', city:'أكادير', code:'AGA'},
      {country:'المغرب', city:'طنجة', code:'TNG'},
      // الجزائر
      {country:'الجزائر', city:'الجزائر', code:'ALG'},
      {country:'الجزائر', city:'وهران', code:'ORN'},
      {country:'الجزائر', city:'قسنطينة', code:'CZL'},
      // تونس
      {country:'تونس', city:'تونس قرطاج', code:'TUN'},
      {country:'تونس', city:'صفاقس', code:'SFA'},
      {country:'تونس', city:'جربة', code:'DJE'},
      // ليبيا
      {country:'ليبيا', city:'طرابلس', code:'MJI'},
      {country:'ليبيا', city:'بنغازي', code:'BEN'},
      // السودان
      {country:'السودان', city:'الخرطوم', code:'KRT'},
      // العراق
      {country:'العراق', city:'بغداد', code:'BGW'},
      {country:'العراق', city:'أربيل', code:'EBL'},
      {country:'العراق', city:'النجف', code:'NJF'},
      {country:'العراق', city:'البصرة', code:'BSR'},
      // اليمن
      {country:'اليمن', city:'صنعاء', code:'SAH'},
      {country:'اليمن', city:'عدن', code:'ADE'},
      // سوريا
      {country:'سوريا', city:'دمشق', code:'DAM'},
      // موريتانيا / جيبوتي / الصومال / جزر القمر
      {country:'موريتانيا', city:'نواكشوط', code:'NKC'},
      {country:'جيبوتي', city:'جيبوتي', code:'JIB'},
      {country:'الصومال', city:'مقديشو', code:'MGQ'},
      {country:'جزر القمر', city:'موروني', code:'HAH'},
    ];

    // وجهات سياحية أجنبية مشهورة (أوروبا/آسيا/أفريقيا/أمريكا)
    const INTL_AIRPORTS = [
      // تركيا والقوقاز
      {country:'تركيا', city:'إسطنبول الجديدة', code:'IST'},
      {country:'تركيا', city:'صبيحة كوكجن', code:'SAW'},
      {country:'تركيا', city:'أنطاليا', code:'AYT'},
      {country:'تركيا', city:'طرابزون', code:'TZX'},
      {country:'تركيا', city:'أنقرة', code:'ESB'},
      {country:'جورجيا', city:'تبليسي', code:'TBS'},
      {country:'جورجيا', city:'باتومي', code:'BUS'},
      {country:'أذربيجان', city:'باكو', code:'GYD'},

      // أوروبا الغربية/الوسطى/الشرقية
      {country:'المملكة المتحدة', city:'لندن هيثرو', code:'LHR'},
      {country:'المملكة المتحدة', city:'لندن غاتويك', code:'LGW'},
      {country:'فرنسا', city:'باريس شارل ديغول', code:'CDG'},
      {country:'فرنسا', city:'باريس أورلي', code:'ORY'},
      {country:'هولندا', city:'أمستردام', code:'AMS'},
      {country:'ألمانيا', city:'فرانكفورت', code:'FRA'},
      {country:'ألمانيا', city:'ميونخ', code:'MUC'},
      {country:'ألمانيا', city:'برلين', code:'BER'},
      {country:'سويسرا', city:'زيورخ', code:'ZRH'},
      {country:'سويسرا', city:'جنيف', code:'GVA'},
      {country:'بلجيكا', city:'بروكسل', code:'BRU'},
      {country:'الدنمارك', city:'كوبنهاغن', code:'CPH'},
      {country:'النرويج', city:'أوسلو', code:'OSL'},
      {country:'السويد', city:'ستوكهولم', code:'ARN'},
      {country:'إسبانيا', city:'برشلونة', code:'BCN'},
      {country:'إسبانيا', city:'مدريد', code:'MAD'},
      {country:'إسبانيا', city:'فالنسيا', code:'VLC'},
      {country:'إسبانيا', city:'مايوركا', code:'PMI'},
      {country:'إيطاليا', city:'روما فيوميتشينو', code:'FCO'},
      {country:'إيطاليا', city:'ميلانو مالبينسا', code:'MXP'},
      {country:'إيطاليا', city:'فينيسيا', code:'VCE'},
      {country:'اليونان', city:'أثينا', code:'ATH'},
      {country:'اليونان', city:'هيراكليون/كريت', code:'HER'},
      {country:'النمسا', city:'فيينا', code:'VIE'},
      {country:'تشيك', city:'براغ', code:'PRG'},
      {country:'المجر', city:'بودابست', code:'BUD'},
      {country:'بولندا', city:'وارسو', code:'WAW'},
      {country:'بولندا', city:'كراكوف', code:'KRK'},
      {country:'البرتغال', city:'لشبونة', code:'LIS'},
      {country:'البرتغال', city:'بورتو', code:'OPO'},

      // آسيا والمحيط الهندي
      {country:'المالديف', city:'ماليه', code:'MLE'},
      {country:'سريلانكا', city:'كولومبو', code:'CMB'},
      {country:'الهند', city:'دلهي', code:'DEL'},
      {country:'الهند', city:'مومباي', code:'BOM'},
      {country:'الهند', city:'غوا', code:'GOI'},
      {country:'سنغافورة', city:'سنغافورة', code:'SIN'},
      {country:'ماليزيا', city:'كوالالمبور', code:'KUL'},
      {country:'تايلاند', city:'بانكوك', code:'BKK'},
      {country:'تايلاند', city:'بوكيت', code:'HKT'},
      {country:'إندونيسيا', city:'بالي/دنمباسار', code:'DPS'},
      {country:'هونغ كونغ', city:'هونغ كونغ', code:'HKG'},
      {country:'تايوان', city:'تايبيه', code:'TPE'},
      {country:'كوريا الجنوبية', city:'سيؤول إنشيون', code:'ICN'},
      {country:'اليابان', city:'طوكيو ناريتا', code:'NRT'},
      {country:'اليابان', city:'طوكيو هانيدا', code:'HND'},

      // أفريقيا
      {country:'كينيا', city:'نيروبي', code:'NBO'},
      {country:'تنزانيا', city:'زنجبار', code:'ZNZ'},
      {country:'جنوب أفريقيا', city:'كيب تاون', code:'CPT'},
      {country:'جنوب أفريقيا', city:'جوهانسبرغ', code:'JNB'},
      {country:'موريشيوس', city:'موريشيوس', code:'MRU'},

      // الأمريكيتان
      {country:'الولايات المتحدة', city:'نيويورك JFK', code:'JFK'},
      {country:'الولايات المتحدة', city:'واشنطن دلس', code:'IAD'},
      {country:'الولايات المتحدة', city:'شيكاغو أوهير', code:'ORD'},
      {country:'الولايات المتحدة', city:'لوس أنجلِس', code:'LAX'},
      {country:'الولايات المتحدة', city:'سان فرانسيسكو', code:'SFO'},
      {country:'كندا', city:'تورنتو', code:'YYZ'},
      {country:'كندا', city:'فانكوفر', code:'YVR'},
    ];

    const ALL_AIRPORTS = [...ARAB_AIRPORTS, ...INTL_AIRPORTS];

    /***** 2) بناء القوائم ديناميكياً (من/إلى) مجمّعة حسب الدولة *****/
    function renderAirportSelect(selectEl){
      // تجميع حسب الدولة
      const byCountry = {};
      ALL_AIRPORTS.forEach(a=>{
        (byCountry[a.country] ||= []).push(a);
      });
      // ترتيب الدول أبجدياً
      const countries = Object.keys(byCountry).sort((a,b)=>a.localeCompare(b,'ar'));
      selectEl.innerHTML = "";
      countries.forEach(cty=>{
        const optgroup = document.createElement('optgroup');
        optgroup.label = cty;
        // ترتيب المدن داخل الدولة
        byCountry[cty].sort((a,b)=>a.city.localeCompare(b.city,'ar'));
        byCountry[cty].forEach(a=>{
          const opt = document.createElement('option');
          opt.value = a.code;
          opt.textContent = `${cty} — ${a.city} (${a.code})`;
          optgroup.appendChild(opt);
        });
        selectEl.appendChild(optgroup);
      });
    }

    /***** 3) بناء الروابط للمواقع *****/
    const kayakCabin = c => ({economy:'e',business:'b',first:'f'}[c]||'e');
    const ymd = d => d || "";
    const ymdCompact = d => d? d.replace(/-/g,"") : "";

    function buildURL(provider, o, d, dep, ret, pax, cabin){
      const depYMD = ymd(dep), retYMD = ymd(ret);
      const depSC  = ymdCompact(dep), retSC = ymdCompact(ret);

      switch(provider){
        case 'skyscanner': {
          let base = `https://www.skyscanner.net/transport/flights/${o}/${d}`;
          if(depSC) base += `/${depSC}`;
          if(retSC) base += `/${retSC}`;
          return `${base}/?adults=${encodeURIComponent(pax)}&cabinclass=${encodeURIComponent(cabin)}&locale=ar-SA`;
        }
        case 'kayak': {
          let base = `https://www.kayak.ae/flights/${o}-${d}`;
          if(depYMD) base += `/${depYMD}`;
          if(retYMD) base += `/${retYMD}`;
          return `${base}?adults=${encodeURIComponent(pax)}&cabin=${encodeURIComponent(kayakCabin(cabin))}&lang=ar&sort=price_a`;
        }
        default: return '#';
      }
    }

    function openSelected(){
      const o = document.getElementById('origin').value;
      const d = document.getElementById('destination').value;
      const p = document.getElementById('provider').value;
      const dep = document.getElementById('dep').value;
      const ret = document.getElementById('ret').value;
      const pax = document.getElementById('pax').value || 1;
      const cabin = document.getElementById('cabin').value;
      if(!o || !d){ alert('اختر: من / إلى'); return; }
      if(p==='kayak' && !dep){ alert('كيّاك يعمل أفضل عند تحديد تاريخ الذهاب.'); return; }
      const url = buildURL(p,o,d,dep,ret,pax,cabin);
      window.open(url,'_blank','noopener');
    }

    /***** 4) تعبئة تلقائية + إنشاء القوائم عند التحميل *****/
    (function init(){
      // ابني القائمتين
      renderAirportSelect(document.getElementById('origin'));
      renderAirportSelect(document.getElementById('destination'));

      // قيَم افتراضية
      const now = new Date();
      const d1 = new Date(now); d1.setDate(d1.getDate()+7);
      const d2 = new Date(now); d2.setDate(d2.getDate()+14);
      const iso = d => d.toISOString().slice(0,10);

      document.getElementById('origin').value='BAH';
      document.getElementById('destination').value='CAI';
      document.getElementById('dep').value=iso(d1);
      document.getElementById('ret').value=iso(d2);
      document.getElementById('pax').value=1;
      document.getElementById('cabin').value='economy';
      document.getElementById('provider').value='skyscanner';
    })();
  </script>
</body>
</html>
