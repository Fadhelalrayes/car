<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ°ÙƒØ±ØªÙƒ</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body{margin:0;background:#f8fafc;color:#0f172a;font-family:'Cairo',sans-serif}
    header{background:#fff;border-bottom:1px solid #e5e7eb}
    .container{max-width:880px;margin:0 auto;padding:16px}
    .row{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;background:#0ea5e9;color:#fff;font-weight:900}
    .title{font-size:22px;font-weight:900}
    .stack{display:grid;gap:14px;margin-top:12px}
    .fld{position:relative;background:#fff;border:2px solid #e5e7eb;border-radius:16px;padding:14px}
    .fld label{display:block;font-size:13px;color:#64748b;margin-bottom:6px}
    .fld input{width:100%;border:0;outline:none;background:transparent;padding:8px 2px;font-size:18px;color:#0f172a}
    .cta{width:100%;display:block;text-align:center;background:#0ea5e9;color:#fff;border:0;border-radius:16px;padding:16px 18px;font-weight:900;font-size:18px;cursor:pointer}
    .cta:hover{background:#0284c7}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:14px;margin-top:12px}
    .results{display:flex;flex-direction:column;gap:10px}
    .ticket{border:1px solid #e5e7eb;border-radius:14px;padding:12px;background:#fff;display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center}
    .ticket .meta{color:#64748b;font-size:13px}
    .ticket .price{font-weight:900;font-size:18px}
    footer{margin-top:18px;border-top:1px dashed #e5e7eb;padding:14px 0}
    .credit{display:flex;gap:8px;align-items:center;flex-wrap:wrap;color:#64748b}
    .credit a{color:#0284c7;font-weight:800;text-decoration:none}
    .credit a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="row">
        <div class="logo">âœˆï¸</div>
        <div class="title">ØªØ°ÙƒØ±ØªÙƒ</div>
      </div><form id="searchForm" class="stack" onsubmit="event.preventDefault(); searchRSS();">
    <div class="fld">
      <label for="origin">Ù…Ù†</label>
      <input id="origin" placeholder="Ù…Ø«Ø§Ù„: BAH Ø£Ùˆ DXB">
    </div>
    <div class="fld">
      <label for="destination">Ø¥Ù„Ù‰</label>
      <input id="destination" placeholder="Ù…Ø«Ø§Ù„: CAI Ø£Ùˆ RUH">
    </div>
    <button class="cta" type="submit">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
  </form>
</div>

  </header>  <main class="container">
    <section id="resultsCard" class="card" style="display:none">
      <h4 style="margin:0 0 6px 0">Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø±Ø­Ù„Ø§Øª (RSS)</h4>
      <p id="summary" style="font-size:12px;color:#64748b">â€”</p>
      <div id="tickets" class="results"></div>
    </section><footer>
  <div class="credit">
    <span>Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±: <a href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1" target="_blank" rel="noopener">ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</a></span>
  </div>
</footer>

  </main>  <script>
    const FEEDS = [
      {name:"SecretFlying", url:"https://www.secretflying.com/feed/"},
      {name:"TheFlightDeal", url:"https://www.theflightdeal.com/feed/"},
      {name:"Fly4free Global", url:"https://www.fly4free.com/feed/"}
    ];

    // Ø¨Ø±ÙˆÙƒØ³ÙŠ Ù„ØªØ¬Ø§ÙˆØ² CORS
    const proxy = (u) => `https://api.allorigins.win/raw?url=${encodeURIComponent(u)}`;

    async function fetchRSS(url){
      const res = await fetch(proxy(url));
      const txt = await res.text();
      const doc = new window.DOMParser().parseFromString(txt, "text/xml");
      return [...doc.querySelectorAll("item")].map(it=>({
        title: it.querySelector("title")?.textContent||"",
        link: it.querySelector("link")?.textContent||"",
        pubDate: it.querySelector("pubDate")?.textContent||""
      }));
    }

    async function searchRSS(){
      const origin=document.getElementById('origin').value.toUpperCase();
      const destination=document.getElementById('destination').value.toUpperCase();
      const resultsCard=document.getElementById('resultsCard');
      const ticketsBox=document.getElementById('tickets');
      const summary=document.getElementById('summary');

      resultsCard.style.display='block';
      summary.textContent = `Ù…Ù† ${origin||'Ø£ÙŠ'} Ø¥Ù„Ù‰ ${destination||'Ø£ÙŠ'} â€” Ù†ØªØ§Ø¦Ø¬ Ù…Ù† RSS`;
      ticketsBox.innerHTML='<div class="ticket"><div class="meta">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„...</div></div>';

      let all=[];
      for(const f of FEEDS){
        try{
          const items=await fetchRSS(f.url);
          items.forEach(x=>all.push({...x,source:f.name}));
        }catch(e){console.log('ÙØ´Ù„',f.url);}
      }

      const filtered=all.filter(it=>{
        const t=it.title.toUpperCase();
        if(origin && destination) return t.includes(origin)&&t.includes(destination);
        if(origin) return t.includes(origin);
        if(destination) return t.includes(destination);
        return true;
      });

      ticketsBox.innerHTML='';
      if(!filtered.length){ticketsBox.innerHTML='<div class="ticket"><div class="meta">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¢Ù†</div></div>';return;}

      filtered.slice(0,10).forEach(t=>{
        const el=document.createElement('div'); el.className='ticket';
        el.innerHTML=`
          <div>
            <div><strong>${t.title}</strong></div>
            <div class='meta'>${t.source} â€¢ ${t.pubDate}</div>
          </div>
          <a href='${t.link}' target='_blank' class='price'>Ø§ÙØªØ­</a>`;
        ticketsBox.appendChild(el);
      });
    }
  </script></body>
</html>
